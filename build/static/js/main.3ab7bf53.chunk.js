(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,a){e.exports=a.p+"static/media/simple-avatar.da821694.png"},222:function(e,t,a){e.exports=a.p+"static/media/alice.a5f1af60.png"},242:function(e,t,a){e.exports=a.p+"static/media/adler.96381ab7.png"},243:function(e,t,a){e.exports=a.p+"static/media/neh.78ae3a6e.png"},244:function(e,t,a){e.exports=a.p+"static/media/oxford.4faf3814.png"},245:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABaCAYAAABzAJLvAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoODgUwIc83UwAADexJREFUeNrtXWl34joSvZLNZiBAAmTvfv2W+cvzaf7YvKWTzh4SCDsY25oPZbexLTkxkLY74zqHcxLHEF1XSaoqVV0Y/v0fgU3kr2uAMf93AeC3k+A1gH5/HADDSfRvjRrQbsg//+IOsJ3gtdMuUC7ghwtjwJ9XwfE7AvhyDOha9N67Z2A6D14XAmg3gWZN/j/++w3QQp910gEqxa2Grm8OWvK77YQAC+DyAVhZUeUKARzsqT9/ZQGcB6+VdKQmIoSZMcBxAGhBpX+TGKZ3f6Oq/uzIAwWgs62HvfkT03XAsoPXBmOg0yQwiyVw1QuOe68KLE2yVO8+mdi2Czr0EDiLXv8hyhVRDTMA5gooFgjHbAHc9HxMjAG1Ct2j67RSxeENGzMAFAopKrgoUfB4BnRbwMsE6A18QLoGnHcBjfsPScRoamG698osPSWpGaTEdXkcAPUq0B8CzyMfb0EnvJy5eIV67AzAaCpZERm9hEhJwfsNYPYYtfSbHjBb+oNr1IDDFi1f4g1aYqA9LGzt1TJSlf16VMEOgNsnYLrw8TbrQLf5dryOoAkRllJha+Vup+BykQYQVsR8SUpiDDjr0kCdBAMdTuVL2UEjXQWXiv5sXDfG2cLH++mQZm8SvOOZXJFn3Z0omG+1L7Wb6mn42ykpN4msLOChLxklS/5Z7yH1itrL/uOMlJtElivgvi/3b8Ru9iO+1btbNYXjIIDei9QxVIppAZf3UWdDAPh8vDPAW8nRgXwcQgAPg4R4V8C3B7mvcdre2ZC3CJMYxXqOI1fycAJM5jTYgh5Z3fzQStC9vRc52IbhOisZkPFM7QkPJ7Q9He2TAyrbfhmjEGowIqdMhnfPiMbWqSh4MAGeX2jQzZrcUbBtf1Y2a0Dd8GfowiSgS5M0LQOr68DhfrI97b1kOAWeXuhnoxx1uLxZ6eFtuXgZ932TwRgwY/CWCxSF7BDuZgqezIGnAcV5Jx2axQKkZJm7LwSBG4zfkDFZ8yI/HbnJhCwodwjUysBJlwz3cUAzGgq8/TG9kuA93z3ezRQ8GJMT9T2bAwrkq2Xg5inZXiSLdfcMd+ZmQLmWTVvRr8fuEuvG/t0WUK0A98/b/49mnZ7fO+BlG+eilW4bB64faUlKKgWNVoQd7kHvLtviPevKs1ip78HKwN0BTtq0b47dpU2oVyYIQTO23XxXoO8mHl7hJiyehwQ2Dm+jRnH9D3Ae3y97zxkBabqhlCPICbEcQGOUw9U0ApyFEGjrtZABrTplvBgnvEuTvGaNk2edAt73P54R8AEVC0AxZP0fTQQA4fiOE9LFy5HLh5ZcwbmCc8kVnEuu4FxyBeeSKziXXMG55ArOFZxLruBccgXnkis4l/cWfRfV85kWxvy6ZSGCp1v/B3h13D7RMZ5RAiolfBiFryyqsliYVHZjuf0/GqdjvMpHwsuA1Yo6ShYmYFl0Ds0ZdMwWVCHYH5HmqxU6uDZK2ahmTCJecd94RkXlmmIHmi3cXiJQ4WBrj5T9s51POx7eKdWVS/D6B/5e+chsQUVmRgk4aqvLSrxKhYwYMEazYPH5a2PzcE0XVCVqlIHjA3Xds2Vnp1aMMWpYe+j741Xg5coPmJvAPzc05devT+fA1zu3njkj2r15St5ZEMG7BP65DeLiHJjM6LppZWfmXj9S2S57HbD+KvDrR+qsL2rAdY/2toMmWXwW5OKWVhMpVrfajzO3AF3QvXFFgFc9v9X16o7KZI8PaEXLgvxz83phvIdXCOj4/YyW5ZeJ2wYpUfJtj9Z7xqgeeK+ajWXqUtFNLwR1PzZr1Neru8VuYFQvNVlQq8l0LqGcAHD1QHg5o1aUaiUbeC/u5MoVAiiX1vDy73h1CEEOhlGiiserB/lD48y15IzM3OchsLLlfzvrEibPOw43qhsloFoCLJdyIexMMkaVn+eHfp9R2vLYj+Lw5LxLCvaYCNbu44HVTOPAryfqVs3RLDv70PNIfv3Lsd+7HOtxg5T464m67TNMpJKat+zInz3z2nTVeLnUW1RZSlYAf7uPeveOAH45Tl48bzlqvP0RGUHacvskX5Y/H736Vh6whskM+PtGvkR7MpxmIIkhUcjBXrKwzQs1/r6Jn+1Po/Rj+4UkYmk3aa99s4KvHijU8GZAs+bSFoQBv6QLeDSVP4TWXsJV4CHYk9yqR3mqAHkH4Y8UWU+ybVPXyBvyUDpMi8Cuf8bRPmV4FiaFRuHNi/P0sj6yB14puRRLMYgtm5RpWmTM3+mOABy3/dRleDlcpRz/9iQTqrX3eszv4tUJ7Fpg/8uRm5+FSyjihPY1t4WSpbQ3zZfR/91pqpW7NIGrx+B71rmsfjvxZ0KpIMELwLEBnkIWy8uTRxiHYsK25SpgwDwQN3o9v+v/QJaemy3Ts2ghWZ41TR3w3zzJjbFSIrzrn8e5PP9upxz/hkXF+OclptbeQ3fWDIpxw8suYy5oO+q2p6Vc9oZr69bsnqoEZM8AOq3orGcKagVk6NDFC2dlMplHZjzdqcXsX1k6UGIJLX+kIE3RtHivNesiFHhniwheHY6jJhkTIjp7Abl3ndYslvFXapzSeqYlMQqXjU6JV0SzA4xly8hXdjDDxjnw9YZi+kiY9PlInRxwhDwmrqSoYNlY1xMwlg38ee2f/nj+BWf0UD4dqY9AHcly7pGgphkHh2U9LrZsojr2lLuOt1SAjmIMg5y5khOTpVkIUC3Roci6PA7oAGSd6sgD++Xk7QmQyTyKl7v7clostwUJ6etwQn7EcBxMxHAGfD4JGKQeu4fdSRhkyoV096m9alTBjBHbjXddCLqv20r22U9DyXZUSNcPOdwngtfADF5SdLBY+ittowYcNiNj1WOtWabITjPdPUgVA3rKtR0iBS0n3EZUeA/308VbLvpHl+vblKdc26GctMIQ5WuX7cj5nzinY6lUPUihJgUFA/44T65c25GvVowR1VHaosKra8C/zmKJWrnU0bi8l9992s5GGNHdV7vYg2Eyr9eyqXBA5kidd7MRJh4dqMfen8Ti1f34klFVh+owwSgj1iH7kRJHOtYfA9MlcVcVNLlD6D2Q/ogKB2QPqFpJTg/8XjKJOaYdjID5ghJVehSvjsmcPmC+VOeYOacPyIKMZlTd4Ag6AQqfLjFG3v/FHcXrRokoFosFsviFSWHV3FTj1TXgeD8bs3cwpuIGxwZqVVKmLGz66uKtlt3JSN63jvu+nwxQgf0lI3zNkwX5BnWDTry4W3ukOtJbmvTqj9YSJCweb0EHPh9mQ7mjKZ0mNaq0LXFGp10yptt1vM8+u6AeS7lXd0lBs6BcxwFGEyIH90I1IWh8lRIxp6sSEoy9nuYUgs7A281sKNdxKDL4ckyrj4f3pA28jCn2VyWo1vDq0uxVUSOLMcrZyc1yDpx2olSAniEaJfKE52ayzJMjaDnzDCVLeD0OzDDeRo10c9+n5ZnHOVke9R5jdKrUMACjkk0OybjxaBrFvwuTWjmGM9pzGQs+AA8XY/SVOHuGb8g/E15vK5mb5JeMp27/FQsdF54cuBySa8vAz9qM5QjCcdAEOvvUhLVcUXLeU6rO1/A6P3e3oSMoBu40KItlOcByCawcePuM/r3O+aMRg3qVGZUSUFH8/UPhdbNdlXIAb94A/sElV3Cu4FxyBeeSKziXXMG55ArOJVdwLrmCcwXnkis4l1zBueQKziVXcC5byfuXDTLQmexwGizsKxap3rdufKwnygAsXLwLFy8Y1ZPXytRx8dN/OSV3CU56QwULnaDqwPmCaou8L4VuN9Nt9NoYL/dLjh0hxzub08vD23DxvnPn4u4VPDeBuyffStkbrX48o1el5Ndeqe7NUgHGfEm1YEnxjmb0qpSIuE1VgLAl3t3twRon9tPb3nZL0HxJ1EbhjrqFCXy9jTaepbYUuyWst0/b4/3rOtim+50c9Ya2t9SdLMao8HryClGaEIDtNlnHPRQhqH3Gcpf3i3vqsGs3skGlyDkZW1yHhUiK98436otbMpxOc+tuEn0nyr16lNMNCVCR2/6e60yt1ScLQQ+oP1KXul7e+T+3G1QFmQWJI0HVdRdvJYp3tgT6Q5qVTNJofnlPPwgAh62d4N1ewf2RnDvadqhZTdXuyRjNRqNMxnH5oN6/TjvJOwbfSwZjOXe04wAnHWodUeGtlullroCLBwVNIgPOOzujydh+ie5LmqYdQRX5b6XhLejA76fqZq9ZhvZdGQmqEMCXU7Vyw1IsAH+cqhnkt9x3d6fg2+eo2+i4JJmbdOap9qnBOBukoFeSVcYjBdU3eJSqbbn3srNwcfMlmnu0PaHrrVoyjmXGKDx66L+yUoypZSMtEW4CI4y3WU9mzB4J6uMg/r7xbCdE5JvP4PFMvmfuNxKGGj2fTUAI6qST8VgNJunOXpkx2w45f0kmxXWPSF89vM26nEWg97KTJMjmM/hF8sB1LX5pYcwnBV1ZFPrYjs/JeLhPCq4to8QjVsqkoM8SX+O1NOs6XnNFmLxMlxDUuV83aMULz2jH2cl3Om2uYFlYdBBjzaZFsZ3tNkiFO+8/HxFQr9vPtoMzmbF0v8RqYUbpmFr1V/C6Bhxm52XM91OEIOcsTDoq3Ge85VcXba5gS9IdXy2p020eWM8R80CUi8BZJ+h0cC5ndzVX6dAqhDsUv8e8mjoRcvUQnI3eeyplCh/XnUqPBDXsSFoWoG0XLu0uVSliWEFtRz7jjRLwqaswPcnQ7IyRgqp2o6mCkqlu+Mb8Fpd6B/1x/wO3BPCwakwBywAAAABJRU5ErkJggg=="},247:function(e,t,a){e.exports=a.p+"static/media/blue.a27192ea.png"},248:function(e,t,a){e.exports=a.p+"static/media/yellow.3ca5719a.png"},257:function(e,t,a){e.exports=a(479)},262:function(e,t,a){},333:function(e,t,a){},479:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),c=(a(262),a(47)),i=a(511),s=a(6),u=a.n(s),m=a(2),d=m.types.model("AggregationsStore",{showModal:m.types.optional(m.types.boolean,!1)}).actions(function(e){return{setModal:function(t){e.showModal=t},toggleModal:function(){e.showModal=!e.showModal}}}),p=a(56),f=a.n(p),g=a(31),b=Object(g.a)(),E=m.types.model("AuthStore",{user:m.types.optional(m.types.frozen({}),null),error:m.types.optional(m.types.string,"")}).actions(function(e){return{checkCurrent:Object(m.flow)(u.a.mark(function t(){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.checkCurrent();case 3:if(!(a=t.sent)){t.next=10;break}return e.user=a,t.next=8,f.a.checkBearerToken().then(function(t){return Object(m.getRoot)(e).client.setBearerToken(t)});case 8:t.next=11;break;case 10:"/"!==b.location.pathname&&b.push("/");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])})),login:Object(m.flow)(u.a.mark(function(t,a,n){var r;return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,f.a.signIn({login:t,password:a});case 3:return r=o.sent,o.next=6,f.a.checkBearerToken().then(function(t){return Object(m.getRoot)(e).client.setBearerToken(t)});case 6:r&&(e.user=r),n(!1),b.push("/projects"),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(0),e.error=o.t0.message,n(!1);case 15:case"end":return o.stop()}},t,null,[[0,11]])})),logout:Object(m.flow)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.signOut();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.warn(t.t0);case 8:Object(m.getRoot)(e).client.setBearerToken(null),e.user=null,b.push("/");case 11:case"end":return t.stop()}},t,null,[[0,5]])}))}}),h=a(218),v=a.n(h),y=function(e){var t,a=window.location;"undefined"!==typeof a&&null!==a&&(t=a.search.match(e));return t&&t[1]?t[1]:void 0}(/\W?env=(\w+)/)||"production";if(!y.match(/^(production|staging|development)$/))throw new Error("Error: Invalid Environment - ".concat(y));var x={development:{caesar:"https://caesar-staging.zooniverse.org/graphql",tove:"https://tove-staging.zooniverse.org"},production:{caesar:"https://caesar.zooniverse.org/graphql",tove:"https://tove.zooniverse.org"}}[y];var w=m.types.model("ClientStore",{bearerToken:m.types.optional(m.types.string,""),tove:m.types.optional(m.types.frozen({}),null)}).actions(function(e){return{initialize:function(){console.log(x),e.tove=new v.a({baseURI:"https://tove-staging.zooniverse.org",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"})},setBearerToken:function(t){e.tove.jwt(t)}}}),j="row",O="column",k=m.types.model("EditorStore",{layout:m.types.optional(m.types.string,j),linesVisible:m.types.optional(m.types.boolean,!0)}).actions(function(e){return{toggleLineVisibility:function(){e.linesVisible=!e.linesVisible},toggleLayout:function(){e.layout=e.layout===j?O:j}}}),S=a(105),C=["January","February","March","April","May","June","July","August","September","October","November","December"];function A(e){if(!e||!e.length)return"";var t=new Date(e),a=C[t.getMonth()],n=t.getDate(),r=t.getFullYear();return"".concat(a," ").concat(n,", ").concat(r)}var R=m.types.model("Group",{display_name:m.types.optional(m.types.string,""),last_edit:m.types.optional(m.types.string,""),last_editor:m.types.optional(m.types.string,""),subjects:m.types.optional(m.types.number,0)}),D=m.types.model("GroupsStore",{all:m.types.array(m.types.array(R)),current:m.types.optional(R,{}),page:m.types.optional(m.types.number,0),totalPages:m.types.optional(m.types.number,1)}).actions(function(e){return{reset:function(){e.selectGroup(null)},selectGroup:function(t){var a,n=(a=[]).concat.apply(a,Object(S.a)(e.all.slice())).find(function(e){return e.display_name===t});e.current=R.create({display_name:n&&n.display_name||"",subjects:n&&n.subjects||0})},setGroups:function(t){for(var a=Object.keys(t).map(function(e){return R.create({display_name:e,last_edit:A(t[e].updated_at),last_editor:t[e].updated_by||"",subjects:t[e].transcription_count})}),n=[],r=0;a.length;)n.push(a.splice(0,30)),r++;e.totalPages=r,e.all=n},setPage:function(t){e.page=t}}}).views(function(e){return{get title(){return e.current&&e.current.display_name||""}}}),P=m.types.model("ImageStore",{imageScale:m.types.optional(m.types.number,1),rotation:m.types.optional(m.types.number,0),scale:m.types.optional(m.types.number,1),translateX:m.types.optional(m.types.number,0),translateY:m.types.optional(m.types.number,0)}).actions(function(e){return{reset:function(){e.rotation=0,e.scale=e.imageScale,e.translateX=0,e.translateY=0},rotate:function(){e.rotation=360===e.rotation?0:e.rotation+90},setScale:function(t){var a=t||{},n=a.clientHeight,r=a.clientWidth,o=a.naturalHeight,l=a.naturalWidth,c=1;n&&r&&o&&l&&(c=Math.min(r/l,n/o)),e.imageScale=c,e.scale=c},setTranslate:function(t){e.translateX+=t.x,e.translateY+=t.y},zoomIn:function(){e.scale<1.5&&(e.scale+=.1)},zoomOut:function(){e.scale>.2&&(e.scale-=.1)}}}),T={ZOONIVERSE:"ZOONIVERSE ID",INTERNAL:"INTERNAL ID"},L={APPROVED:"approved",FLAGGED:"flagged",IN_PROGRESS:"in_progress",LOW_CONSENSUS:"low_consensus",READY:"ready",UNSEEN:"unseen"},z=m.types.model("SearchStore",{approved:m.types.optional(m.types.boolean,!1),flagged:m.types.optional(m.types.boolean,!1),id:m.types.optional(m.types.string,""),in_progress:m.types.optional(m.types.boolean,!1),low_consensus:m.types.optional(m.types.boolean,!1),ready:m.types.optional(m.types.boolean,!1),type:m.types.optional(m.types.string,""),unseen:m.types.optional(m.types.boolean,!1)}).actions(function(e){return{clearIdTags:function(){e.id="",e.type="",Object(m.getRoot)(e).transcriptions.fetchTranscriptions()},clearTag:function(t){e[t]=!1,Object(m.getRoot)(e).transcriptions.fetchTranscriptions()},fetchTranscriptionsByFilter:function(){Object(m.getRoot)(e).transcriptions.reset();var t=[],a=[L.UNSEEN,L.IN_PROGRESS,L.READY,L.APPROVED],n=[L.FLAGGED,L.LOW_CONSENSUS],r=[],o=[];return Object.keys(e).forEach(function(t){e[t]&&(a.includes(t)&&r.push(t),n.includes(t)&&o.push(t))}),r.length>0&&t.push("filter[status_in]=".concat(r.join(","))),o.length>0&&o.forEach(function(e){return t.push("filter[".concat(e,"_eq]=true"))}),t.join("&")},fetchTranscriptionsById:function(){Object(m.getRoot)(e).transcriptions.reset();var t=e.type===T.ZOONIVERSE?"subject_id":"internal_id";return"filter[".concat(t,"_eq]=").concat(e.id)},setArgs:function(t){Object.keys(t).forEach(function(a){void 0!==e[a]&&(e[a]=t[a])})},reset:function(){Object.keys(e).forEach(function(t){var a=typeof e[t];"string"===a&&(e[t]=""),"boolean"===a&&(e[t]=!1)})},searchTranscriptions:function(t){e.setArgs(t),Object(m.getRoot)(e).transcriptions.fetchTranscriptions()},getSearchQuery:function(){var t="";return t=e.id.length>0&&e.type.length>0?e.fetchTranscriptionsById():e.fetchTranscriptionsByFilter(),Object(m.getRoot)(e).modal.toggleModal(""),t.length>0?"&".concat(t):t}}}).views(function(e){return{get active(){return e.approved||e.flagged||e.in_progress||e.low_consensus||e.ready||e.unseen||e.id.length>0||e.type.length>0}}}),I=a(219),_={IDLE:"IDLE",READY:"READY",LOADING:"LOADING",ERROR:"ERROR"},M=m.types.model("Subject",{id:m.types.optional(m.types.string,""),locations:m.types.array(m.types.frozen({})),metadata:m.types.frozen({})}),N=m.types.model("SubjectStore",{asyncState:m.types.optional(m.types.string,_.IDLE),current:m.types.optional(M,{}),error:m.types.optional(m.types.string,""),index:m.types.optional(m.types.number,0)}).actions(function(e){return{changeIndex:function(t){e.index=t},fetchSubject:Object(m.flow)(u.a.mark(function t(a){var n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncState=_.LOADING,t.prev=1,t.next=4,I.subjects.get({id:a});case 4:(n=t.sent).body.subjects[0]&&(r=n.body.subjects[0],o=M.create({id:r.id,locations:r.locations,metadata:r.metadata}),e.current=o,e.error=""),e.asyncState=_.READY,t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 14:case"end":return t.stop()}},t,null,[[1,9]])})),selectSubject:function(t){t||(t=M.create()),e.current=t}}}).views(function(e){return{get title(){return e.current.id||""}}}),F=a(62),B=a.n(F),V="Researcher",U="Volunteer",q="Viewer",G=["owner","collaborator"],H=["expert","researcher","moderator"],W=m.types.model("Project",{avatar_src:m.types.optional(m.types.string,""),id:m.types.identifier,display_name:m.types.optional(m.types.string,""),role:m.types.optional(m.types.string,"")}),Y=m.types.model("ProjectsStore",{asyncState:m.types.optional(m.types.string,_.IDLE),all:m.types.map(W),current:m.types.safeReference(W),error:m.types.optional(m.types.string,""),roles:m.types.optional(m.types.frozen({}),null)}).actions(function(e){return{createProject:function(e,t){return W.create({avatar_src:e.avatar_src,id:e.id,display_name:e.display_name,role:t})},getRoles:Object(m.flow)(u.a.mark(function t(){var a,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(m.getRoot)(e).auth.user,t.next=3,B.a.type("project_roles").get({user_id:a.id,page_size:50});case 3:n=t.sent,e.roles=n.reduce(function(e,t){var a=q;return t.roles.some(function(e){return H.includes(e)})&&(a=U),t.roles.some(function(e){return G.includes(e)})&&(a=V),e[t.links.project]=a,e},{});case 5:case"end":return t.stop()}},t)})),getProjects:Object(m.flow)(u.a.mark(function t(){var a,n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.asyncState=_.LOADING,a=Object(m.getRoot)(e).client.tove,t.prev=2,e.roles){t.next=6;break}return t.next=6,e.getRoles();case 6:return t.next=8,a.get("/projects");case 8:return n=t.sent,r=JSON.parse(n.body),o=r.data.map(function(e){return e.id}),t.next=13,B.a.type("projects").get({id:o.toString(),cards:!0});case 13:t.sent.forEach(function(t){var a=e.roles[t.id]||q;e.all.put(e.createProject(t,a))}),e.asyncState=_.READY,e.error="",t.next=24;break;case 19:t.prev=19,t.t0=t.catch(2),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 24:case"end":return t.stop()}},t,null,[[2,19]])})),getProject:Object(m.flow)(u.a.mark(function t(a){var n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",void 0);case 2:if(e.asyncState=_.LOADING,t.prev=3,e.roles){t.next=7;break}return t.next=7,e.getRoles();case 7:return t.next=9,B.a.type("projects").get({id:a,cards:!0});case 9:return n=t.sent,r=n[0],o=e.roles[r.id]||q,e.asyncState=_.READY,t.abrupt("return",e.createProject(r,o));case 16:t.prev=16,t.t0=t.catch(3),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 21:case"end":return t.stop()}},t,null,[[3,16]])})),reset:function(){e.selectProject(null),e.all.clear()},selectProject:Object(m.flow)(u.a.mark(function t(){var a,n,r=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:null,n=e.all.get(a)){t.next=6;break}return t.next=5,e.getProject(a);case 5:n=t.sent;case 6:e.setProject(n),e.current=a||void 0;case 8:case"end":return t.stop()}},t)})),setProject:function(t){if(t)try{e.all.put(t)}catch(a){console.error(a)}}}}).views(function(e){return{get id(){return e.current&&e.current.id},get isResearcher(){return e.current&&e.current.role===V||!1},get role(){return e.current&&e.current.role},get title(){return e.current&&e.current.display_name.length?e.current.display_name:"Select Project"},get collabProjects(){return Array.from(e.all.values()).filter(function(e){return e.role!==V})},get ownerProjects(){return Array.from(e.all.values()).filter(function(e){return e.role===V})}}}),X=m.types.model("ModalStore",{current:m.types.optional(m.types.string,"")}).actions(function(e){return{toggleModal:function(t){e.current=t}}}),Z=a(523),J=a(509),Q=a(156),K=a(492),$=a(5),ee=a(220),te=m.types.model("Reduction",{clusters_x:m.types.array(m.types.number),clusters_y:m.types.array(m.types.number),clusters_text:m.types.array(m.types.array(m.types.string)),consensus_text:m.types.optional(m.types.string,""),consensus_score:m.types.optional(m.types.number,0),edited_consensus_text:m.types.optional(m.types.string,""),extract_index:m.types.array(m.types.integer),flagged:m.types.optional(m.types.boolean,!1),gold_standard:m.types.array(m.types.boolean),gutter_label:m.types.optional(m.types.integer,0),line_editor:m.types.optional(m.types.string,""),line_slope:m.types.optional(m.types.number,0),low_consensus:m.types.optional(m.types.boolean,!1),number_views:m.types.optional(m.types.integer,0),seen:m.types.optional(m.types.boolean,!1),slope_label:m.types.optional(m.types.integer,0),user_ids:m.types.array(m.types.maybeNull(m.types.integer))}).actions(function(e){return{setConsensusText:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.line_editor=a?"":Object(m.getRoot)(e).auth.user.display_name,e.edited_consensus_text=a?"":t,Object(m.getRoot)(e).transcriptions.saveTranscription()},toggleCurrentFlag:function(){e.flagged=!e.flagged,Object(m.getRoot)(e).transcriptions.checkForFlagUpdate()},toggleCurrentSeen:function(){e.seen=!e.seen,Object(m.getRoot)(e).transcriptions.saveTranscription()}}}),ae=m.types.array(te),ne=m.types.refinement(m.types.map(ae),function(e){return Z.a(J.a("frame"),Q.a(e))}),re=m.types.model("Transcription",{id:m.types.identifier,flagged:m.types.optional(m.types.boolean,!1),group_id:m.types.optional(m.types.string,""),low_consensus_lines:m.types.optional(m.types.integer,0),pages:m.types.optional(m.types.integer,0),status:m.types.optional(m.types.string,""),text:ne,transcribed_lines:m.types.optional(m.types.number,0)}),oe=m.types.model("TranscriptionsStore",{activeTranscriptionIndex:m.types.maybe(m.types.integer),all:m.types.map(re),asyncState:m.types.optional(m.types.string,_.IDLE),current:m.types.safeReference(re),error:m.types.optional(m.types.string,""),page:m.types.optional(m.types.number,0),totalPages:m.types.optional(m.types.number,1),extracts:m.types.array(m.types.frozen())}).actions(function(e){return{checkForFlagUpdate:function(){var t=!1;e.current.text.forEach(function(e){e.find(function(e){return e.flagged})&&(t=!0)}),e.current.flagged=t,e.saveTranscription()},createTranscription:function(e){var t=e.attributes.text,a=Object.keys(t).filter(function(e){return e.includes("frame")}).length,n=K.a(function(e,t){return t.indexOf("frame")>=0},e.attributes.text);return re.create({id:e.id,flagged:e.attributes.flagged,group_id:e.attributes.group_id,low_consensus_lines:t.low_consensus_lines,pages:a,status:e.attributes.status,text:n,transcribed_lines:t.transcribed_lines})},retrieveTranscriptions:Object(m.flow)(u.a.mark(function t(a){var n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(m.getRoot)(e).client.tove,e.asyncState=_.LOADING,t.prev=2,t.next=5,n.get(a);case 5:r=t.sent,o=JSON.parse(r.body),e.totalPages=o.meta.pagination.last||o.meta.pagination.current,o.data.forEach(function(t){return e.all.put(e.createTranscription(t))}),e.asyncState=_.READY,t.next=17;break;case 12:t.prev=12,t.t0=t.catch(2),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 17:case"end":return t.stop()}},t,null,[[2,12]])})),fetchExtracts:Object(m.flow)(u.a.mark(function t(a){var n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(m.getRoot)(e).workflows.current.id,r="{\n      workflow(id: ".concat(n,") {\n        extracts(subjectId: ").concat(a,', extractorKey: "ext-17") {\n          data, userId\n        }\n      }\n    }'),o=[],t.next=5,Object(ee.request)("https://caesar-staging.zooniverse.org/graphql",r).then(function(t){var a=Object(m.getRoot)(e).subjects.index;o=t.workflow.extracts.filter(function(e){return e.data["frame".concat(a)]})});case 5:e.extracts=o;case 6:case"end":return t.stop()}},t)})),fetchTranscription:Object(m.flow)(u.a.mark(function t(a){var n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",void 0);case 2:return e.asyncState=_.LOADING,n=Object(m.getRoot)(e).client.tove,t.prev=4,t.next=7,n.get("/transcriptions/".concat(a));case 7:return r=t.sent,o=JSON.parse(r.body),e.asyncState=_.READY,t.abrupt("return",e.createTranscription(o.data));case 13:t.prev=13,t.t0=t.catch(4),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 18:case"end":return t.stop()}},t,null,[[4,13]])})),fetchTranscriptions:Object(m.flow)(u.a.mark(function t(){var a,n,r,o=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.length>0&&void 0!==o[0]?o[0]:0,e.reset(),e.page=a,n=Object(m.getRoot)(e).groups.title){t.next=6;break}return t.abrupt("return");case 6:return r=Object(m.getRoot)(e).search.getSearchQuery(),t.next=9,e.retrieveTranscriptions("/transcriptions?filter[group_id_eq]=".concat(n,"&page[number]=").concat(e.page+1).concat(r));case 9:case"end":return t.stop()}},t)})),reset:function(){Object(m.getRoot)(e).aggregations.setModal(!1),e.selectTranscription(null),e.all.clear()},saveTranscription:Object(m.flow)(u.a.mark(function t(){var a,n,r,o,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object($.toJS)(e.current.text),n=Object(m.getRoot)(e).client.tove,r={low_consensus_lines:e.current.low_consensus_lines,transcribed_lines:e.current.transcribed_lines},o=Object.assign(r,a),l={data:{type:"transcriptions",attributes:{flagged:e.current.flagged,text:o}}},t.next=7,n.patch("/transcriptions/".concat(e.current.id),{body:l});case 7:case"end":return t.stop()}},t)})),selectTranscription:Object(m.flow)(u.a.mark(function t(){var a,n,r=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:null,n=e.all.get(a)){t.next=6;break}return t.next=5,e.fetchTranscription(a);case 5:n=t.sent;case 6:if(!a){t.next=9;break}return t.next=9,e.fetchExtracts(a);case 9:e.setTranscription(n),e.current=a||void 0;case 11:case"end":return t.stop()}},t)})),setTextObject:function(t){var a=Object(m.getRoot)(e).subjects.index;e.current.text.set("frame".concat(a),t)},setTranscription:function(t){if(t)try{e.all.put(t)}catch(a){console.error(a)}},updateApproval:Object(m.flow)(u.a.mark(function t(a){var n,r,o,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(m.getRoot)(e).projects.isResearcher,r={data:{type:"transcriptions",attributes:{status:"in_progress"}}},a||(o=n?"approved":"ready",r.data.attributes.status=o),e.current.status=r.data.attributes.status,l=Object(m.getRoot)(e).client.tove,t.next=7,l.patch("/transcriptions/".concat(e.current.id),{body:r});case 7:case"end":return t.stop()}},t)})),setActiveTranscription:function(t){e.activeTranscriptionIndex=t}}}).views(function(e){return{get approved(){return!(!e.current||"approved"!==e.current.status)},get approvedCount(){var t=0;return e.all.forEach(function(e){"approved"===e.status&&t++}),t},get readyForReview(){return!(!e.current||"ready"!==e.current.status)},get title(){return e.current&&e.current.id||""}}}),le=m.types.model("Workflow",{display_name:m.types.optional(m.types.string,""),groups:m.types.optional(m.types.frozen(),{}),id:m.types.identifier,project_id:m.types.optional(m.types.string,""),total_transcriptions:m.types.optional(m.types.number,0)}),ce=m.types.model("WorkflowsStore",{all:m.types.map(le),asyncState:m.types.optional(m.types.string,_.IDLE),current:m.types.safeReference(le),error:m.types.optional(m.types.string,""),page:m.types.optional(m.types.number,0),totalPages:m.types.optional(m.types.number,1)}).actions(function(e){return{createWorkflow:function(e){return le.create({display_name:e.attributes.display_name,groups:e.attributes.groups,id:e.id,project_id:e.relationships.project.data.id,total_transcriptions:e.attributes.total_transcriptions})},fetchWorkflows:Object(m.flow)(u.a.mark(function t(a){var n,r,o,l,c=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:0,e.page=n,e.asyncState=_.LOADING,r=Object(m.getRoot)(e).client.tove,t.prev=4,t.next=7,r.get("/workflows?filter[project_id_eq]=".concat(a,"&page[number]=").concat(e.page+1));case 7:o=t.sent,l=JSON.parse(o.body),e.totalPages=l.meta.pagination.last||l.meta.pagination.current,l.data.forEach(function(t){return e.all.put(e.createWorkflow(t))}),e.asyncState=_.READY,t.next=19;break;case 14:t.prev=14,t.t0=t.catch(4),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 19:case"end":return t.stop()}},t,null,[[4,14]])})),getWorkflow:Object(m.flow)(u.a.mark(function t(a){var n,r,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",void 0);case 2:return e.asyncState=_.LOADING,n=Object(m.getRoot)(e).client.tove,t.prev=4,t.next=7,n.get("/workflows/".concat(a));case 7:return r=t.sent,o=JSON.parse(r.body),e.asyncState=_.READY,t.abrupt("return",e.createWorkflow(o.data));case 13:t.prev=13,t.t0=t.catch(4),console.warn(t.t0),e.error=t.t0.message,e.asyncState=_.ERROR;case 18:case"end":return t.stop()}},t,null,[[4,13]])})),reset:function(){e.selectWorkflow(null),e.all.clear()},selectWorkflow:Object(m.flow)(u.a.mark(function t(){var a,n,r,o=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.length>0&&void 0!==o[0]?o[0]:null,n=e.all.get(a)){t.next=6;break}return t.next=5,e.getWorkflow(a);case 5:n=t.sent;case 6:r=n&&n.groups||[],Object(m.getRoot)(e).groups.setGroups(r),e.setWorkflow(n),e.current=a||void 0;case 10:case"end":return t.stop()}},t)})),setState:function(t){e.asyncState=t},setWorkflow:function(t){if(t)try{e.all.put(t)}catch(a){console.error(a)}}}}).views(function(e){return{get id(){return e.current&&e.current.id},get title(){return e.current&&e.current.display_name||""}}}),ie=m.types.model("AppStore",{aggregations:m.types.optional(d,function(){return d.create({})}),auth:m.types.optional(E,function(){return E.create({})}),client:m.types.optional(w,function(){return w.create({})}),editor:m.types.optional(k,function(){return k.create({})}),image:m.types.optional(P,function(){return P.create({})}),groups:m.types.optional(D,function(){return D.create({})}),search:m.types.optional(z,function(){return z.create({})}),subjects:m.types.optional(N,function(){return N.create({})}),initialized:m.types.optional(m.types.boolean,!1),projects:m.types.optional(Y,function(){return Y.create({})}),modal:m.types.optional(X,function(){return X.create({})}),transcriptions:m.types.optional(oe,function(){return oe.create({})}),workflows:m.types.optional(ce,function(){return ce.create({})})}).actions(function(e){return{getResources:Object(m.flow)(u.a.mark(function t(a){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.project||a.project===e.projects.id){t.next=5;break}return t.next=3,e.projects.selectProject(a.project);case 3:t.next=6;break;case 5:a.project||e.projects.reset();case 6:if(!a.workflow||a.workflow===e.workflows.id){t.next=11;break}return t.next=9,e.workflows.selectWorkflow(a.workflow);case 9:t.next=12;break;case 11:a.workflow||e.workflows.reset();case 12:if(a.group&&a.group!==e.groups.id?e.groups.selectGroup(a.group):a.group||e.groups.reset(),!a.subject||a.subject===e.transcriptions.title){t.next=18;break}return t.next=16,e.transcriptions.selectTranscription(a.subject);case 16:t.next=19;break;case 18:a.subject||e.transcriptions.reset();case 19:case"end":return t.stop()}},t)})),initialize:Object(m.flow)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.client.initialize(),t.next=3,e.auth.checkCurrent();case 3:e.initialized=!0;case 4:case"end":return t.stop()}},t)}))}}),se=ie&&ie.create({}),ue=Object(n.createContext)(se),me=a(221),de=a.n(me),pe=a(8);function fe(){var e=Object(c.f)().pathname;return Object(n.useEffect)(function(){window.scrollTo(0,0)},[e]),null}a(333);var ge=a(515),be=a(520),Ee=a(255),he=a(521),ve=a(519),ye=a(222),xe=a.n(ye),we=a(24),je=a(63),Oe=a.n(je),ke=a(514);function Se(e){var t=e.index,a=e.item;return r.a.createElement(Ee.a,{key:"INFO_".concat(t),width:"medium"},r.a.createElement(ke.a,{level:"6",weight:"bold"},a&&a.header),r.a.createElement(Ee.a,null,a&&a.content))}Se.defaultProps={index:0,item:null};var Ce=Se,Ae=a(3),Re=a(516),De=a(517),Pe=a(481),Te=a(1),Le=a(497),ze=a(37);function Ie(e){var t=e.text;return r.a.createElement(ge.a,{size:"small"},t)}Ie.defaultProps={text:""};var _e=Ie;function Me(){var e=Object(Ae.a)(["\n  flex-direction: column-reverse;\n"]);return Me=function(){return e},e}function Ne(){var e=Object(Ae.a)(["\n  line-height: 0.5em;\n  text-transform: uppercase;\n"]);return Ne=function(){return e},e}function Fe(){var e=Object(Ae.a)(["\n  font-weight: 300;\n"]);return Fe=function(){return e},e}var Be=Object(Te.default)(ke.a)(Fe()),Ve=Object(Te.default)(ge.a)(Ne()),Ue=Object(Te.default)(Re.a)(Me());function qe(e){var t=e.error,a=e.initialValues,n=e.onSubmit;return r.a.createElement(Ee.a,{background:"white",fill:"vertical",margin:{right:"small"},pad:{horizontal:"medium",vertical:"large"}},r.a.createElement(Be,{color:"black",level:"3",margin:{vertical:"large"}},"Log in with your Zooniverse username to get started"),r.a.createElement(ze.b,{initialValues:a,onSubmit:n},function(e){e.errors;var a=e.handleBlur,o=e.handleChange,l=e.handleSubmit,c=e.isSubmitting,i=(e.touched,e.validateForm),s=e.values;return r.a.createElement(Ee.a,{as:"form",onSubmit:l},r.a.createElement(Ue,{htmlFor:"login",label:r.a.createElement(_e,{text:"Username or Email Address"})},r.a.createElement(De.a,{disabled:c,id:"login",name:"login",onBlur:a,onChange:o,placeholder:"e.g. zoofan1@nasa.gov",required:!0,size:"small",type:"text",value:s.login})),r.a.createElement(Ue,{htmlFor:"password",label:r.a.createElement(_e,{text:"Password"})},r.a.createElement(De.a,{disabled:c,id:"password",name:"password",onBlur:a,onChange:o,required:!0,size:"small",type:"password",value:s.password})),r.a.createElement(Ee.a,null,r.a.createElement(ge.a,{color:"red"},t)),r.a.createElement(Pe.a,{alignSelf:"start",disabled:c,gap:"xxsmall",icon:r.a.createElement(Le.a,{size:"small"}),label:r.a.createElement(Ve,{size:"small"},"Sign In"),margin:{vertical:"xsmall"},onClick:function(){return i().then(function(){return n})},plain:!0,reverse:!0,type:"submit"}))}))}qe.defaultProps={error:"",initialValues:null,onSubmit:function(){}};var Ge=qe;var He=Object(pe.a)(function(){var e=r.a.useContext(ue);return r.a.createElement(Ge,{error:e.auth.error,initialValues:{login:"",password:""},onSubmit:function(t,a){var n=a.setSubmitting;e.auth.login(t.login,t.password,n)}})}),We=a(242),Ye=a.n(We),Xe=a(243),Ze=a.n(Xe),Je=a(244),Qe=a.n(Je);function Ke(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return Ke=function(){return e},e}var $e=Object(Te.default)(ge.a)(Ke()),et=[{logo:Ze.a,title:"National Endowment for the Humanities"},{logo:Oe.a,title:"Zooniverse"},{logo:Ye.a,title:"Adler Planetarium"},{logo:Qe.a,title:"Oxford University"}];function tt(){return r.a.createElement(Ee.a,null,r.a.createElement(Ee.a,{direction:"row",pad:{vertical:"small"},align:"center",wrap:!0,gap:"medium"},et.map(function(e){return r.a.createElement(Ee.a,{key:e.title,height:"1.5em",width:"xsmall"},r.a.createElement(ve.a,{alt:"".concat(e.title," Logo"),fit:"contain",src:e.logo}))})),r.a.createElement(Ee.a,null,r.a.createElement($e,{size:"xsmall"},"This material is based upon work supported by the national endowment for the humanities under award HAA-263825-19. The Zooniverse is a collaboration between the Adler Planetarium, the University of Oxford, the University of Minnesota, and the broader Citizen Science Alliance.")),r.a.createElement(be.a,{href:"https://www.zooniverse.org",margin:{vertical:"small"},target:"_blank",rel:"noopener noreferrer"},r.a.createElement($e,null,"zooniverse.org")))}var at=[{header:"WHAT IS THIS",content:r.a.createElement(ge.a,null,"The Zooniverse team have created this app to view and edit the results of transcription projects hosted on Zooniverse.")},{header:"WHO CAN USE IT",content:r.a.createElement(ge.a,null,"Anyone with a text transcription project can use this tool.",r.a.createElement(be.a,{margin:{left:"0.2em"},size:"xsmall"},"Contact")," the Zooniverse team to set up your transcription project.")},{header:"HOW TO USE IT",content:r.a.createElement(Ee.a,null,r.a.createElement(ge.a,null,"Documentation has been created to help research teams set up and optimally use this tool."),r.a.createElement(ge.a,{margin:{vertical:"xsmall"},size:"xsmall"},r.a.createElement(we.a,{to:"/about"},"Link to Documentation")))}];function nt(){return r.a.createElement(he.a,{areas:[{name:"content",start:[0,0],end:[0,0]},{name:"login",start:[1,0],end:[1,0]}],columns:["2/3","1/3"],rows:["full"],fill:!0},r.a.createElement(Ee.a,{gridArea:"content",pad:"medium"},r.a.createElement(Ee.a,{margin:{vertical:"large"}},r.a.createElement(Ee.a,{height:"2em",width:"12em"},r.a.createElement(ve.a,{alt:"Powered by Zooniverse",fit:"contain",src:Oe.a})),r.a.createElement(Ee.a,{width:"50%"},r.a.createElement(ve.a,{alt:"ALICE Logo",fit:"contain",src:xe.a})),r.a.createElement(ge.a,{color:"#5C5C5C",size:"large"},"Aggregate Line Inspector / Collaborative Editor")),r.a.createElement(Ee.a,{border:"bottom",direction:"row",gap:"medium",pad:{bottom:"xlarge"}},at.map(function(e,t){return r.a.createElement(Ce,{key:"INFO_".concat(t),index:t,item:e})})),r.a.createElement(tt,null)),r.a.createElement(Ee.a,{gridArea:"login"},r.a.createElement(He,null)))}var rt=a(34),ot=a(14),lt=a(13),ct=a(245),it=a.n(ct);function st(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return st=function(){return e},e}var ut=Object(Te.default)(ge.a)(st());function mt(e){var t=e.history,a=e.project,n=a.avatar_src&&a.avatar_src.length?"//".concat(a.avatar_src):it.a;return r.a.createElement(Ee.a,{margin:{bottom:"small"}},r.a.createElement(Pe.a,{onClick:function(e){t.push("/projects/".concat(a.id,"/workflows"))},plain:!0},r.a.createElement(Ee.a,{height:"small",width:"12em"},r.a.createElement(ve.a,{alt:"".concat(a.display_name," Display Image"),fit:"cover",src:n})),r.a.createElement(Ee.a,{border:!0,height:"5em",gap:"xsmall",justify:"center",pad:"xsmall",width:"12em"},r.a.createElement(ut,{textAlign:"center",weight:"bold"},a.display_name),r.a.createElement(ut,{color:"#57585B",textAlign:"center"},a.role))))}mt.defaultProps={history:null,project:{}};var dt=Object(c.g)(mt);var pt=Object(c.g)(Object(pe.a)(function(e){var t=e.match,a=r.a.useContext(ue);r.a.useEffect(function(){!function(){var e=Object(rt.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getResources(t.params);case 2:return e.next=4,a.projects.getProjects();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[t,a]);var n=a.projects.ownerProjects||[],o=a.projects.collabProjects||[],l=a.projects.error;return r.a.createElement(Ee.a,{background:"white",fill:"vertical",margin:"medium",pad:"large",round:"xsmall"},n.length>0&&r.a.createElement(Ee.a,null,r.a.createElement(ge.a,null,"Your Projects"),r.a.createElement(Ee.a,{direction:"row",gap:"small",margin:{vertical:"small"},wrap:!0},n.map(function(e,t){return r.a.createElement(dt,{key:"Personal_Project_".concat(t),project:e})}))),o.length>0&&r.a.createElement(Ee.a,null,r.a.createElement(ge.a,null,"Collaborations"),r.a.createElement(Ee.a,{direction:"row",gap:"small",margin:{vertical:"small"},wrap:!0},o.map(function(e,t){return r.a.createElement(dt,{key:"Collaborative_Project_".concat(t),project:e})}))),a.projects.asyncState===_.LOADING&&r.a.createElement(Ee.a,{justify:"center",direction:"row",gap:"xsmall"},r.a.createElement(ge.a,null,"Loading"),r.a.createElement(ot.a,{icon:lt.h,spin:!0})),a.projects.asyncState===_.ERROR&&r.a.createElement(ge.a,{color:"red",textAlign:"center"},l),0===n.length&&0===o.length&&a.projects.asyncState===_.READY&&r.a.createElement(ge.a,{textAlign:"center"},"We couldn't find any transcription projects you participate in."))})),ft=a(46),gt="/projects",bt="/about",Et="/projects/:project/workflows",ht="/projects/:project/workflows/:workflow/groups",vt="/projects/:project/workflows/:workflow/groups/:group/subjects",yt="/projects/:project/workflows/:workflow/groups/:group/subjects/:subject/edit",xt={DOWNLOAD_GROUP:"DOWNLOAD_GROUP",DOWNLOAD_SUBJECT:"DOWNLOAD_SUBJECT",LOCKED:"LOCKED",SEARCH:"SEARCH",UNAPPROVED:"UNAPPROVED"},wt=a(508),jt=a(102),Ot=a(103),kt=a(106),St=a(104),Ct=a(108),At=a(512),Rt=a(498),Dt=a(499);function Pt(){var e=Object(Ae.a)(["\n  position: relative;\n  > label {\n    > div {\n      margin-right: 10px;\n    }\n  }\n"]);return Pt=function(){return e},e}function Tt(){var e=Object(Ae.a)(["\n  &:first-of-type {\n    margin: 0 10px 0 0;\n    padding: 0;\n  }\n"]);return Tt=function(){return e},e}var Lt=Object(Te.default)(Pe.a)(Tt()),zt=Object(Te.default)(At.a)(Pt()),It=function(e){function t(){return Object(jt.a)(this,t),Object(kt.a)(this,Object(St.a)(t).apply(this,arguments))}return Object(Ct.a)(t,e),Object(Ot.a)(t,[{key:"onChange",value:function(e){var t=this.props.setStep,a=e.target.value.split("-")[1];t(Number(a))}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.disabled,n=e.setStep,o=e.steps;if(o&&o.length>1){var l=t+1,c=t-1,i=o.map(function(e,t){var n="step-".concat(t);return{disabled:a,id:n,value:n}});return r.a.createElement(Ee.a,{direction:"row"},r.a.createElement(Lt,{"data-index":c,disabled:0===t,icon:r.a.createElement(Rt.a,null),onClick:function(){return n(c)},plain:!0}),r.a.createElement(zt,{direction:"row",gap:"none",name:"step-selectors",onChange:this.onChange.bind(this),options:i,value:"step-".concat(t)}),r.a.createElement(Lt,{"data-index":l,disabled:t===o.length-1,icon:r.a.createElement(Dt.a,null),onClick:function(){return n(l)},plain:!0}))}return null}}]),t}(r.a.Component);It.defaultProps={activeStep:0,disabled:!1,setStep:function(){},steps:[]};var _t=It;function Mt(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return Mt=function(){return e},e}var Nt=Object(Te.default)(ge.a)(Mt());function Ft(e){var t=e.clearTag,a=e.tag,n=e.value;return r.a.createElement(Ee.a,{align:"center",background:"light-2",direction:"row",gap:"xsmall",pad:"xsmall",round:"xsmall"},r.a.createElement(Nt,null,a,": ",n),r.a.createElement(Pe.a,{label:r.a.createElement(ot.a,{icon:lt.j,size:"xs"}),onClick:function(){return t(a)},plain:!0}))}Ft.defaultProps={clearTag:function(){},tag:"",value:""};var Bt=Ft;var Vt=function(){var e=r.a.useContext(ue),t=Object.keys(e.search).filter(function(t){return!0===e.search[t]}),a=e.search.id.length>0&&e.search.type.length>0;return r.a.createElement(Ee.a,{align:"baseline",direction:"row",gap:"small"},r.a.createElement(ge.a,{size:"large"},"Search Results"),t.map(function(t){return r.a.createElement(Bt,{key:"SEARCH_TAG_".concat(t),clearTag:e.search.clearTag,tag:t,value:e.search[t].toString()})}),a&&r.a.createElement(Bt,{clearTag:e.search.clearIdTags,tag:e.search.type,value:e.search.id}))};function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function qt(e){return r.a.createElement(Ee.a,{background:"white",fill:"horizontal",margin:{vertical:"small"},pad:"medium",round:"xsmall"},e.searching&&r.a.createElement(Vt,null),e.data.length>0&&r.a.createElement(wt.a,{columns:Object(S.a)(e.columns).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ut(a,!0).forEach(function(t){Object(ft.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e)}),data:e.data,onClickRow:function(t){if(e.onSelection)e.onSelection(t.datum);else{var a=e.history.location.pathname+t.datum.link;e.history.push(a)}},pad:"xsmall",primaryKey:"id"}),e.status===_.LOADING&&r.a.createElement(Ee.a,{justify:"center",direction:"row"},r.a.createElement(ge.a,null,"Loading..."),r.a.createElement(ot.a,{icon:lt.h,spin:!0})),e.status===_.ERROR&&r.a.createElement(ge.a,{color:"red",textAlign:"center"},e.error),0===e.data.length&&e.status===_.READY&&r.a.createElement(ge.a,{textAlign:"center"},"Sorry, we couldn't find any ".concat(e.resource)),r.a.createElement(Ee.a,{align:"center",margin:{top:"small"}},r.a.createElement(_t,{activeStep:e.activeStep,setStep:e.setStep,steps:e.steps})))}qt.defaultProps={activeStep:0,columns:[],data:[],error:"",onSelection:null,resource:null,searching:!1,setStep:function(){},status:_.IDLE,steps:[]};var Gt=Object(c.g)(qt);function Ht(){var e=Object(Ae.a)(["\n  height: 0.25em;\n"]);return Ht=function(){return e},e}function Wt(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return Wt=function(){return e},e}var Yt=Object(Te.default)(ge.a)(Wt()),Xt=Object(Te.default)(ot.a)(Ht()),Zt=[{property:"id",header:"Zooniverse ID"},{property:"internal_id",header:"Internal ID"},{property:"lastEdit",header:"Last Edit",render:function(e){var t=e.locked?"red":"black";return r.a.createElement(ge.a,{color:t},e.locked?"LOCKED":e.lastEdit)}},{property:"lastEditor",header:"Last Editor"},{property:"status",header:"Status",render:function(e){return r.a.createElement(Yt,null,e.status)}},{property:"flagged",header:"Flag",render:function(e){return e.flagged?r.a.createElement(Xt,{color:"tomato",icon:lt.a}):null}},{property:"consensusScore",header:"Consensus Score",render:function(e){var t=e.consensusScore<=e.classifications/2?"red":"black";return r.a.createElement(ge.a,{color:t},e.low_consensus_lines,"/",e.transcribed_lines)}},{property:"transcribed_lines",header:"Transcribed Lines"},{property:"pages",header:"Pages"}];function Jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Qt=Object(c.g)(Object(pe.a)(function(e){var t=e.history,a=e.match,n=r.a.useContext(ue);r.a.useEffect(function(){return function(){var e=Object(rt.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getResources(a.params);case 2:return e.next=4,n.transcriptions.fetchTranscriptions();case 4:n.search.reset();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){return n.modal.toggleModal("")}},[a,n]);var o=Array.from(Array(n.transcriptions.totalPages).keys()),l=Array.from(n.transcriptions.all.values());return r.a.createElement(Ee.a,{margin:"medium",fill:"vertical"},r.a.createElement(Gt,{activeStep:n.transcriptions.page,columns:Zt,data:l,error:n.transcriptions.error,onSelection:function(e){e.locked&&n.modal.toggleModal(xt.LOCKED);var r=Object(c.d)(yt,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jt(a,!0).forEach(function(t){Object(ft.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({subject:e.id},a.params));t.push(r)},resource:"Subjects",searching:n.search.active,setStep:function(e){n.transcriptions.fetchTranscriptions(e)},status:n.transcriptions.asyncState,steps:o}))})),Kt=[{property:"display_name",header:"Group"},{property:"subjects",header:"Subjects"},{property:"last_edit",header:"Last Edit"},{property:"last_editor",header:"Last Editor"}];function $t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ea=Object(c.g)(Object(pe.a)(function(e){var t=e.history,a=e.match,n=r.a.useContext(ue);r.a.useEffect(function(){n.getResources(a.params)},[a,n]);var o=Array.from(Array(n.groups.totalPages).keys()),l=n.groups.page,i=n.groups.all.length>0?n.groups.all[l]:[];return r.a.createElement(Ee.a,{margin:"medium",fill:"vertical"},r.a.createElement(Gt,{activeStep:l,columns:Kt,data:i,resource:"groups",onSelection:function(e){var n=Object(c.d)(vt,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$t(a,!0).forEach(function(t){Object(ft.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$t(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({group:e.display_name},a.params));t.push(n)},setStep:function(e){n.groups.setPage(e)},status:_.READY,steps:o}))})),ta=[{property:"name",header:"Workflow Name",render:function(e){return r.a.createElement(ge.a,null,e.display_name)}},{property:"id",header:"Workflow id"},{property:"groups",header:"Groups",render:function(e){return r.a.createElement(ge.a,null,Object.keys(e.groups).length)}},{property:"total_transcriptions",header:"Total Subjects"},{property:"lastEdit",header:"Last Edit"},{property:"lastEditor",header:"Last Editor"}];function aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var na=Object(c.g)(Object(pe.a)(function(e){var t=e.history,a=e.match,n=r.a.useContext(ue);r.a.useEffect(function(){!function(){var e=Object(rt.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getResources(a.params);case 2:return e.next=4,n.workflows.fetchWorkflows(a.params.project);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[a,n]);var o=Array.from(n.workflows.all.values()),l=Array.from(Array(n.workflows.totalPages).keys());return r.a.createElement(Ee.a,{margin:"medium",fill:"vertical"},r.a.createElement(Gt,{activeStep:n.workflows.page,columns:ta,data:o,error:n.workflows.error,onSelection:function(e){var n=Object(c.d)(ht,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?aa(a,!0).forEach(function(t){Object(ft.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({workflow:e.id},a.params));t.push(n)},resource:"Workflows",setStep:function(e){var t=a.params&&a.params.project;n.workflows.fetchWorkflows(t,e)},status:n.workflows.asyncState,steps:l}))})),ra=a(11),oa=a(513),la=a(247),ca=a.n(la),ia=a(248),sa=[{caption:"Photo Caption? Is this needed?",image:a.n(ia).a,title:"",text:"\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\n      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex\n      ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing\n      elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi\n      ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur\n      adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore\n      magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n      laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit\n      amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut\n      labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n      exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\n      tempor\n    "},{caption:"",image:"",title:"another topic",text:"\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\n      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex\n      ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing\n      elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n      Ut enim ad minim veniam, quis nostrud\n    "},{caption:"This is a video",image:ca.a,title:"something else",text:"\n      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\n      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex\n      ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing\n      elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi\n      ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur\n      adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore\n      magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n      laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit\n      amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut\n    "}];function ua(){var e=Object(Ae.a)(["\n  max-width: 100%;\n"]);return ua=function(){return e},e}function ma(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return ma=function(){return e},e}function da(){var e=Object(Ae.a)(["\n  line-height: 1.75em;\n"]);return da=function(){return e},e}var pa=Object(Te.default)(ge.a)(da()),fa=Object(Te.default)(ge.a)(ma()),ga=Object(Te.default)(ve.a)(ua());function ba(e){return r.a.createElement(Ee.a,{gap:"small"},e.title.length>0&&r.a.createElement(ge.a,{id:e.title,size:"large"},e.title),r.a.createElement(Ee.a,{direction:"row",gap:"medium"},r.a.createElement(Ee.a,{basis:"2/3"},r.a.createElement(pa,{color:"black"},e.text)),r.a.createElement(Ee.a,{basis:"1/3"},r.a.createElement(Ee.a,null,r.a.createElement(Pe.a,{onClick:function(){return e.setModal(e)},plain:!0},r.a.createElement(ga,{alignSelf:"start",fit:"contain",src:e.image})),r.a.createElement(fa,null,e.caption)))))}function Ea(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return Ea=function(){return e},e}ba.defaultProps={caption:"",image:"",setModal:function(){},text:"",title:""};var ha=Object(Te.default)(ge.a)(Ea());function va(e){var t=e.caption,a=e.image,n=e.setModal;return r.a.createElement(Ee.a,{background:"white",elevation:"small",round:"xsmall"},r.a.createElement(Pe.a,{alignSelf:"end",margin:"0.2em",onClick:function(){return n(null)},plain:!0},r.a.createElement(ot.a,{icon:lt.j,size:"xs"})),r.a.createElement(ve.a,{src:a}),r.a.createElement(ha,{margin:"xsmall",size:"0.6em"},t))}function ya(){var e=Object(Ae.a)(["\n  position: -webkit-sticky;\n  position: sticky;\n  top: 1em;\n"]);return ya=function(){return e},e}function xa(){var e=Object(Ae.a)(["\n  @media (max-width: 800px) {\n    font-size: 0.75em;\n  }\n"]);return xa=function(){return e},e}function wa(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return wa=function(){return e},e}function ja(){var e=Object(Ae.a)(["\n  text-decoration: none;\n"]);return ja=function(){return e},e}va.defaultProps={caption:"",image:"",setModal:function(){}};var Oa=Object(Te.default)(be.a)(ja()),ka=Object(Te.default)(ge.a)(wa()),Sa=Object(Te.default)(ge.a)(xa()),Ca=Object(Te.default)(Ee.a)(ya());function Aa(){var e=r.a.useState(null),t=Object(ra.a)(e,2),a=t[0],n=t[1];return r.a.createElement(Ee.a,{align:"start",gap:"xsmall",margin:"medium",direction:"row"},a&&r.a.createElement(oa.a,null,r.a.createElement(va,{caption:a.caption,image:a.image,setModal:n})),r.a.createElement(Ca,{basis:"20%"},r.a.createElement(Ee.a,{gap:"xsmall"},r.a.createElement(Ee.a,{height:"1em",width:"6em"},r.a.createElement(ve.a,{alt:"Zooniverse Logo",fit:"contain",src:Oe.a})),r.a.createElement(Sa,{size:"xlarge"},"Transcription viewer/editor help")),r.a.createElement(Ee.a,{gap:"xsmall",margin:{top:"large"}},r.a.createElement(ka,{weight:"bold"},"Contents"),sa.map(function(e,t){return r.a.createElement(Oa,{key:"ABOUT_NAV_".concat(t),href:"#".concat(e.title)},r.a.createElement(ka,{color:"#005D69",weight:300},e.title))}))),r.a.createElement(Ee.a,{background:"white",basis:"80%",gap:"small",pad:"large",round:"xsmall"},r.a.createElement(ge.a,{color:"black",size:"xlarge"},"How to Use this Tool"),sa.map(function(e,t){return r.a.createElement(ba,{key:"CONTENT_".concat(t),caption:e.caption,image:e.image,setModal:n,text:e.text,title:e.title})})))}function Ra(){var e=Object(Ae.a)(["\n  :hover {\n    cursor: ",";\n  }\n"]);return Ra=function(){return e},e}var Da=Object(Te.default)(Ee.a)(Ra(),function(e){var t="row"===e.direction?"col-resize":"row-resize";return e.disabled&&(t="default"),t});function Pa(e){var t=e.direction,a=e.disabled,n=e.onMouseDown,o="row"===t?lt.c:lt.b,l=a?"gray":"black";return r.a.createElement(Da,{align:"center",direction:t,disabled:a,justify:"center",onMouseDown:n},r.a.createElement(ot.a,{color:l,icon:o}))}Pa.defaultProps={direction:"row",disabled:!1,onMouseDown:function(){}};var Ta=Pa,La=a(249),za=a(522),Ia=a(10);function _a(){var e=Object(Ae.a)(["\n  font-style: italic;\n"]);return _a=function(){return e},e}var Ma=Object(Te.default)(ge.a)(_a());function Na(e){var t=e.callback,a=e.setCallback;return r.a.createElement(Ee.a,{background:{color:"white",opacity:"95%"},fill:"vertical",round:"xsmall"},r.a.createElement(Ee.a,{basis:"65%",justify:"center",margin:"xlarge"},r.a.createElement(ge.a,{weight:"bold"},"Are you sure?"),r.a.createElement(ge.a,null,"Any custom text rearrangements will be lost by applying these changes."),r.a.createElement(Ee.a,{direction:"row",justify:"between",margin:{top:"medium"}},r.a.createElement(Pe.a,{onClick:function(){a(null)},plain:!0},r.a.createElement(ge.a,{size:"small"},"GO BACK")),r.a.createElement(Pe.a,{onClick:t,plain:!0},r.a.createElement(ge.a,{size:"small"},"YES, APPLY CHANGES")))),r.a.createElement(Ee.a,{basis:"35%",margin:{horizontal:"xlarge"}},r.a.createElement(ge.a,{weight:"bold"},"Want to apply these settings to your entire workflow?"),r.a.createElement(Ma,null,"It's quicker to re-download the data from the Lab on Zooniverse.org")))}function Fa(){var e=Object(Ae.a)(["\n  background: ",";\n  border: ",";\n"]);return Fa=function(){return e},e}function Ba(){var e=Object(Ae.a)(["\n  background: ",";\n  border: ",";\n"]);return Ba=function(){return e},e}Na.defaultProps={callback:function(){},setCallback:function(){}};var Va=Object(Te.default)(Ee.a)(Ba(),function(e){return e.selectedReducer===on.OPTICS&&"#F5F5F5"},function(e){return e.selectedReducer===on.OPTICS?"1px solid #979797":"1px solid transparent"}),Ua=Object(Te.default)(Ee.a)(Fa(),function(e){return e.selectedReducer===on.DBSCAN&&"#F5F5F5"},function(e){return e.selectedReducer===on.DBSCAN?"1px solid #979797":"1px solid transparent"});function qa(e){var t=e.closeContainer,a=(e.currentScreen,e.selectReducer),n=e.selectedReducer,o=e.setScreen;return r.a.createElement(Ee.a,{gap:"xsmall"},r.a.createElement(Ee.a,{gap:"xsmall",pad:"small"},r.a.createElement(ge.a,null,"Choose a clustering algorithm based on the way in which transcriptions have been made."),r.a.createElement(Ee.a,{direction:"row",margin:{bottom:"large"}},r.a.createElement(Pe.a,{label:r.a.createElement(Va,{selectedReducer:n,gap:"xsmall",pad:"small"},r.a.createElement(Ee.a,{background:"light-4",height:"8em",fill:"horizontal"}),r.a.createElement(ge.a,null,"OPTICS Reducer"),r.a.createElement(ge.a,null,"Short description of when to use this algorithm")),onClick:function(){a(on.OPTICS)},plain:!0}),r.a.createElement(Pe.a,{label:r.a.createElement(Ua,{selectedReducer:n,gap:"xsmall",pad:"small"},r.a.createElement(Ee.a,{background:"light-4",height:"8em",fill:"horizontal"}),r.a.createElement(ge.a,null,"DBSCAN Reducer"),r.a.createElement(ge.a,null,"Short description of when to use this algorithm")),onClick:function(){a(on.DBSCAN)},plain:!0}))),r.a.createElement(Ee.a,{border:"top",direction:"row",gap:"small",justify:"end",pad:{horizontal:"small",vertical:"xsmall"}},r.a.createElement(Pe.a,{a11yTitle:"Close Aggregation Settings",label:r.a.createElement(ge.a,{size:"small"},"CLOSE AND CANCEL"),onClick:t,plain:!0}),r.a.createElement(Pe.a,{disabled:null===n,label:r.a.createElement(ge.a,{size:"small"},"NEXT"),onClick:function(){return o(n)},plain:!0})))}qa.defaultProps={closeContainer:function(){},currentScreen:null,disableNext:!0,selectReducer:function(){},selectedReducer:null};var Ga=a(26);function Ha(){var e=Object(Ae.a)(["\n  font-size: 0.75em;\n"]);return Ha=function(){return e},e}function Wa(){var e=Object(Ae.a)(["\n  border: 1px solid #979797;\n  border-radius: 0.25em;\n  color: ",";\n  height: 2em;\n  text-align: center;\n"]);return Wa=function(){return e},e}var Ya=Ga.object().shape({auto:Ga.boolean(),minSamples:Ga.number().min(2,"Must be at least two").max(50,"Too long"),xi:Ga.number().min(0,"Must be no less than 0").max(1,"Must not be greater than 1").required("Required"),angleEps:Ga.number().min(0,"Must be at least 0").max(180,"Must not be greater than 180").required("Required"),gutterEps:Ga.number().min(0,"Must be at least 0").required("Required"),minLineLength:Ga.number().min(0,"Must be at least 0").required("Required")}),Xa=Object(Te.default)(ze.a)(Wa(),function(e){return e.disabled?"#d3d3d3":"black"}),Za=Te.default.label(Ha());function Ja(e){var t=e.closeContainer,a=e.setCallback,n=e.setScreen,o=e.submitOptics;return r.a.createElement(Ee.a,{gap:"small",direction:"row"},r.a.createElement(ze.b,{initialValues:{angleEps:30,auto:!1,gutterEps:150,minLineLength:0,minSamples:2,xi:.05},isInitialValid:!0,validationSchema:Ya},function(e){var l=e.errors,c=e.isValid,i=e.values;return r.a.createElement(Ee.a,{as:"form",onSubmit:o,gap:"small"},r.a.createElement(Ee.a,{gap:"xsmall",pad:"small"},r.a.createElement(ge.a,null,"OPTICS Reducer"),r.a.createElement(Ee.a,{direction:"row",gap:"xsmall"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"min_samples"),r.a.createElement(ge.a,null,"Increase if a single line of text is being identified multiple times, decrease if multiple lines are being clustered together."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.minSamples)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement(Xa,{disabled:i&&i.auto,name:"minSamples",type:"number",min:"2"}),r.a.createElement(Ee.a,{align:"center",direction:"row"},r.a.createElement(ze.a,{id:"auto",name:"auto",type:"checkbox"}),r.a.createElement(Za,{htmlFor:"auto"},"auto")))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"xi"),r.a.createElement(ge.a,null,"Increase if a single line of text is being identified multiple times, decrease if multiple lines are being clustered together."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.xi)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement(Xa,{name:"xi",type:"number",min:"0",max:"1",step:"0.01"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"angle_eps"),r.a.createElement(ge.a,null,"How close the angle of two lines need to be in order to be placed in the same angle cluster. Changes the reading order."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.angleEps)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement(Xa,{name:"angleEps",type:"number",min:"0",max:"180",step:"0.1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"gutter_eps"),r.a.createElement(ge.a,null,"How close the 'x' position of thes tart of two lines need to be in order to be placed in the same column cluster. Changes the reading order."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.gutterEps)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement(Xa,{name:"gutterEps",type:"number",min:"0",step:"0.1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"min_line_length"),r.a.createElement(ge.a,null,"Used to filter out short lines that were drawn but don't correspond with text in the image."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.minLineLength)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement(Xa,{name:"minLineLength",type:"number",min:"0",step:"0.1"})))),r.a.createElement(Ee.a,{border:"top",direction:"row",gap:"small",justify:"between",pad:{horizontal:"small",vertical:"xsmall"}},r.a.createElement(Pe.a,{label:r.a.createElement(ge.a,{size:"small"},"BACK TO ALGORITHM CHOICE"),onClick:function(){return n(on.CHOOSE)},plain:!0}),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Pe.a,{a11yTitle:"Close Aggregation Settings",label:r.a.createElement(ge.a,{size:"small"},"CLOSE AND CANCEL"),onClick:t,plain:!0}),r.a.createElement(Pe.a,{disabled:!c,label:r.a.createElement(ge.a,{size:"small"},"APPLY"),onClick:function(){var e=function(){o(i)};a(function(){return e})},plain:!0}))))}))}Ja.defaultProps={closeContainer:function(){},setScreen:function(){}};var Qa=Ja;function Ka(){var e=Object(Ae.a)(["\n  border: 1px solid #979797;\n  border-radius: 0.25em;\n  height: 2em;\n  text-align: center;\n"]);return Ka=function(){return e},e}var $a=Object(Te.default)(ze.a)(Ka()),en=Ga.object().shape({epsSlope:Ga.number().min(0,"Must be at least zero").max(180,"Must not be greater than 180").required("Required"),epsLine:Ga.number().min(0,"Must be at least 0").required("Required"),epsWord:Ga.number().min(0,"Must be at least 0").required("Required"),gutterTol:Ga.number().min(0,"Must be at least 0").required("Required"),minSamples:Ga.number().min(1,"Must be at least 1").required("Required"),minWordCount:Ga.number().min(1,"Must be at least 1").required("Required")});function tn(e){var t=e.closeContainer,a=e.setCallback,n=e.setScreen,o=e.submitDBScan;return r.a.createElement(Ee.a,{gap:"small",direction:"row"},r.a.createElement(ze.b,{initialValues:{epsSlope:25,epsLine:40,epsWord:40,gutterTol:0,minSamples:1,minWordCount:1},isInitialValid:!0,validationSchema:en},function(e){var l=e.errors,c=e.isValid,i=e.values;return r.a.createElement(Ee.a,{as:"form",onSubmit:o,gap:"small"},r.a.createElement(Ee.a,{gap:"xsmall",pad:"small"},r.a.createElement(ge.a,null,"DBSCAN Reducer"),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"eps_slope"),r.a.createElement(ge.a,null,"Increase if too many angle clusters are found, decrease if there are too few."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.epsSlope)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement($a,{name:"epsSlope",type:"number",min:"0",max:"180",step:"1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"eps_line"),r.a.createElement(ge.a,null,"Increase this number if a single line of text is being identified multiple times, decrease if multiple lines of text are being clustered together."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.epsLine)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement($a,{name:"epsLine",type:"number",min:"0",step:"1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"eps_word"),r.a.createElement(ge.a,null,"How close horizontally the end points of a line need to be in order to be identified as a single point."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.epsWord)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement($a,{name:"epsWord",type:"number",min:"0",step:"1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"gutter_tol"),r.a.createElement(ge.a,null,"Increase this value if neighboring columns of text are not being separated as multiple columns. This will only work if there are no annotations that bridge the gap between the columns."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.gutterTol)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement($a,{name:"gutterTol",type:"number",min:"0",step:"0.1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"min_samples"),r.a.createElement(ge.a,null,"For all clustering stages, this is how many points need to be close together for a cluster to be identified. Set this to 1 for all annotations to be kept. Increase this value to remove outlier annotations for the aggregation."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.minSamples)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement($a,{name:"minSamples",type:"number",min:"1",step:"1"}))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Ee.a,{basis:"large"},r.a.createElement(ge.a,{weight:"bold"},"min_word_count"),r.a.createElement(ge.a,null,"Increasing this number will only keep high consensus words in the final text."),r.a.createElement(ge.a,{color:"red",margin:{top:"xsmall"},size:"xsmall"},l&&l.minWordCount)),r.a.createElement(Ee.a,{basis:"xsmall"},r.a.createElement($a,{name:"minWordCount",type:"number",min:"1",step:"1"})))),r.a.createElement(Ee.a,{border:"top",direction:"row",gap:"small",justify:"between",pad:{horizontal:"small",vertical:"xsmall"}},r.a.createElement(Pe.a,{label:r.a.createElement(ge.a,{size:"small"},"BACK TO ALGORITHM CHOICE"),onClick:function(){return n(on.CHOOSE)},plain:!0}),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Pe.a,{a11yTitle:"Close Aggregation Settings",label:r.a.createElement(ge.a,{size:"small"},"CLOSE AND CANCEL"),onClick:t,plain:!0}),r.a.createElement(Pe.a,{disabled:!c,label:r.a.createElement(ge.a,{size:"small"},"APPLY"),onClick:function(){var e=function(){o(i)};a(function(){return e})},plain:!0}))))}))}function an(){var e=Object(Ae.a)(["\n  :hover {\n    cursor: move\n  }\n"]);return an=function(){return e},e}tn.defaultProps={closeContainer:function(){},setScreen:function(){}};var nn=Object(Te.default)(Ee.a)(an());function rn(e){return r.a.createElement(Ee.a,{background:"white",elevation:"medium",round:"xsmall",width:"30em"},r.a.createElement(nn,{align:"center",background:"light-2",className:e.dragHandle,height:"1em",round:{corner:"top",size:"xsmall"}},r.a.createElement(ot.a,{icon:lt.b})),r.a.createElement(za.a,null,r.a.createElement(Ee.a,null,r.a.createElement(Ee.a,{border:"bottom",direction:"row",justify:"between",pad:{horizontal:"small",vertical:"xsmall"}},r.a.createElement(ge.a,null,"Edit Aggregation Settings"),r.a.createElement(Pe.a,{a11yTitle:"Close Aggregation Settings",label:r.a.createElement(ot.a,{icon:lt.j}),onClick:e.closeContainer,plain:!0})),r.a.createElement(Ee.a,null,e.currentScreen===on.CHOOSE&&r.a.createElement(qa,{closeContainer:e.closeContainer,selectReducer:e.selectReducer,selectedReducer:e.selectedReducer,setScreen:e.setScreen}),e.currentScreen===on.OPTICS&&r.a.createElement(Qa,{closeContainer:e.closeContainer,setCallback:e.setCallback,setScreen:e.setScreen,submitOptics:e.submitOptics}),e.currentScreen===on.DBSCAN&&r.a.createElement(tn,{closeContainer:e.closeContainer,setCallback:e.setCallback,setScreen:e.setScreen,submitDBScan:e.submitDBScan}))),e.confirmationCallback&&r.a.createElement(Na,{callback:e.confirmationCallback,setCallback:e.setCallback})))}qa.defaultProps={closeContainer:function(){},confirmationCallback:null,currentScreen:null,selectReducer:function(){},selectedReducer:null,setScreen:function(){},submitDBScan:function(){},submitOptics:function(){}},qa.propTypes={closeContainer:Ia.func,confirmationCallback:Ia.func,currentScreen:Ia.string,selectReducer:Ia.func,selectedReducer:Ia.string,setScreen:Ia.func,submitDBScan:Ia.func,submitOptics:Ia.func};var on={CHOOSE:"CHOOSE_REDUCER",OPTICS:"OPTICS_REDUCER",DBSCAN:"DBSCAN_REDUCER"};function ln(e){var t=e.dragHandle,a=r.a.useContext(ue),n=r.a.useState(null),o=Object(ra.a)(n,2),l=o[0],c=o[1],i=r.a.useState(on.CHOOSE),s=Object(ra.a)(i,2),u=s[0],m=s[1],d=r.a.useState(null),p=Object(ra.a)(d,2),f=p[0],g=p[1];return r.a.createElement(rn,{closeContainer:function(){return a.aggregations.toggleModal()},confirmationCallback:f,currentScreen:u,dragHandle:t,selectReducer:c,selectedReducer:l,setCallback:g,setScreen:m,submitDBScan:function(e){console.log("Submitting DBScan Form",e)},submitOptics:function(e){console.log("Submitting Optics Form",e)}})}var cn=r.a.forwardRef(function(e,t){var a=r.a.useRef(null),n=r.a.useRef(null);return r.a.useEffect(function(){var e=t.current&&t.current.getBoundingClientRect(),r=n.current&&n.current.getBoundingClientRect(),o=e.width-r.width-8;a.current.updatePosition({x:o,y:20+e.top})},[t]),r.a.createElement(La.a,{dragHandleClassName:"dragHandle",enableResizing:!1,ref:a},r.a.createElement(Ee.a,{ref:n},r.a.createElement(ln,{dragHandle:"dragHandle"})))});function sn(e){var t=e.linesVisible,a=e.toggleLineVisibility,n=t?"HIDE ALL LINES":"VIEW ALL LINES";return r.a.createElement(Ee.a,{background:{color:"white"},round:{size:"xsmall",corner:"top"},pad:"xsmall"},r.a.createElement(Ee.a,{align:"center",direction:"row",justify:"between"},r.a.createElement(ge.a,null,"Original Subject"),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Pe.a,{label:r.a.createElement(ge.a,null,n),onClick:a,plain:!0}))))}sn.defaultProps={linesVisible:!0,toggleLineVisibility:function(){}};var un=Object(pe.a)(function(){var e=r.a.useContext(ue);return r.a.createElement(sn,{linesVisible:e.editor.linesVisible,toggleLineVisibility:function(){return e.editor.toggleLineVisibility()}})}),mn=a(500);function dn(e){var t=e.onClick;return r.a.createElement(Pe.a,{a11yTitle:"Zoom in on Subject",label:r.a.createElement(Ee.a,{margin:"xsmall"},r.a.createElement(mn.a,{color:"#000000"})),onClick:t,plain:!0})}dn.defaultProps={onClick:function(){}};var pn=dn;function fn(){var e=r.a.useContext(ue);return r.a.createElement(pn,{onClick:e.image.zoomIn})}var gn=a(501);function bn(e){var t=e.onClick;return r.a.createElement(Pe.a,{a11yTitle:"Zoom out on Subject",label:r.a.createElement(Ee.a,{margin:"xsmall"},r.a.createElement(gn.a,{color:"#000000"})),onClick:t,plain:!0})}bn.defaultProps={onClick:function(){}};var En=bn;function hn(){var e=r.a.useContext(ue);return r.a.createElement(En,{onClick:e.image.zoomOut})}var vn=a(502);function yn(e){var t=e.onClick;return r.a.createElement(Pe.a,{a11yTitle:"Rotate Image 90 Degrees",label:r.a.createElement(Ee.a,{margin:"xsmall"},r.a.createElement(vn.a,{color:"#000000"})),onClick:t,plain:!0})}yn.defaultProps={onClick:function(){}};var xn=yn;function wn(){var e=r.a.useContext(ue);return r.a.createElement(xn,{onClick:e.image.rotate})}var jn=a(503);function On(e){var t=e.onClick;return r.a.createElement(Pe.a,{a11yTitle:"Reset Image Position",label:r.a.createElement(Ee.a,{margin:"xsmall"},r.a.createElement(jn.a,{color:"#000000"})),onClick:t,plain:!0})}On.defaultProps={onClick:function(){}};var kn=On;function Sn(){var e=r.a.useContext(ue);return r.a.createElement(kn,{onClick:e.image.reset})}var Cn=function(){var e={side:"right",color:"#979797"};return r.a.createElement(Ee.a,{background:"#A6A7A9",direction:"row",elevation:"large",margin:"small",round:"xxsmall"},r.a.createElement(Ee.a,{border:e},r.a.createElement(fn,null)),r.a.createElement(Ee.a,{border:e},r.a.createElement(hn,null)),r.a.createElement(Ee.a,{border:e},r.a.createElement(wn,null)),r.a.createElement(Ee.a,null,r.a.createElement(Sn,null)))},An=function(e){function t(){return Object(jt.a)(this,t),Object(kt.a)(this,Object(St.a)(t).apply(this,arguments))}return Object(Ct.a)(t,e),Object(Ot.a)(t,[{key:"render",value:function(){return r.a.createElement(Cn,null)}}]),t}(n.Component);var Rn=function(e){switch(e%12){case 0:return"#D0021B";case 1:return"#F5A623";case 2:return"#F8E71C";case 3:return"#7ED321";case 4:return"#417505";case 5:return"#4A90E2";case 6:return"#9013FE";case 7:return"#BD10E0";case 8:return"#50E3C2";case 9:return"#B8E986";case 10:return"#D06F7B";case 11:return"#795315";default:return"#000000"}};function Dn(e){var t=e.lines,a=e.isExtract,n=e.reductionIndex,o=a?4:10,l=a?"4":"0",c=a?"0.5":"3";return r.a.createElement("g",null,t.map(function(e,t){var a=Rn(n),i=[],s=e.x1<e.x2?e.x2-o:e.x2+o;i.push(r.a.createElement("circle",{key:"SVG_DOT_".concat(t,"_1"),cx:e.x1,cy:e.y1,r:o,fill:a,stroke:a,strokeWidth:c})),i.push(r.a.createElement("circle",{key:"SVG_DOT_".concat(t,"_2"),cx:e.x2,cy:e.y2,r:o,fill:"transparent",stroke:a,strokeWidth:c}));var u=r.a.createElement("line",{key:"SVG_LINE_".concat(t),x1:e.x1,y1:e.y1,x2:s,y2:e.y2,stroke:a,strokeWidth:c,strokeDasharray:l});return r.a.createElement("g",{key:"TRANSCRIPTION_".concat(t)},u,i)}))}function Pn(e){var t=e.extractLines,a=e.linesVisible,n=e.reductionLines,o=e.x,l=e.y,c="translate(".concat(o,", ").concat(l,")");return a?r.a.createElement("g",{transform:c},n.map(function(e,t){return r.a.createElement(Dn,{key:"SVG_LINE_".concat(t),lines:e,reductionIndex:t})}),t.map(function(e,t){return r.a.createElement(Dn,{key:"SVG_LINE_".concat(t),isExtract:!0,lines:e,reductionIndex:t})})):null}function Tn(e){var t=[];return e&&e.clusters_text&&e.clusters_text.forEach(function(e){e.forEach(function(e,a){t[a]||(t[a]=[]),e&&e.length&&t[a].push(e)})}),t.map(function(e){return e.join(" ")})}Dn.defaultProps={isExtract:!1,lines:[],reductionIndex:0},Pn.defaultProps={extractLines:[],linesVisible:!0,reductionLines:[],x:0,y:0};var Ln=Object(pe.a)(function(e){var t=e.x,a=e.y,n=[],o=[],l=r.a.useContext(ue),c=l.subjects.index,i=l.transcriptions.current,s=l.transcriptions.extracts.filter(function(e){return e.data["frame".concat(c)]}).reduce(function(e,t){return e[t.userId]||(e[t.userId]=[]),e[t.userId].push(t.data),e},{}),u=i&&i.text&&i.text.get("frame".concat(c));if(u){o=u.map(function(e){return function(e){var t=[];if(e&&e.clusters_x&&e.clusters_y){var a=e.clusters_x.length-1;t.push({x1:e.clusters_x[0],x2:e.clusters_x[a],y1:e.clusters_y[0],y2:e.clusters_y[a]})}return t}(e)});var m=u.map(function(e){return Tn(e)});u.forEach(function(e,t){n.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=[];return t.user_ids&&t.user_ids.forEach(function(l,c){e[l]&&e[l].forEach(function(e){if(e["frame".concat(r)]){var l=e["frame".concat(r)].text[t.extract_index[c]];if(l&&l[0]===n[a][c]){var i=t.extract_index[c],s=e["frame".concat(r)].points,u=s.x[i].length-1;o.push({x1:s.x[i][0],x2:s.x[i][u],y1:s.y[i][0],y2:s.y[i][u]})}}})}),o}(s,e,t,m,c))})}var d={extractLines:n,reductionLines:o};return r.a.createElement(Pn,{x:t,y:a,linesVisible:l.editor.linesVisible,extractLines:d.extractLines,reductionLines:d.reductionLines})});var zn=function(e){var t=e.onMouseDown,a=e.onMouseMove,n=e.onMouseUp,o=e.height,l=e.width;return r.a.createElement("rect",{id:"InteractionLayer",width:l,height:o,onMouseDown:t,onMouseLeave:n,onMouseMove:a,onMouseUp:n,fill:"transparent",x:-.5*l,y:-.5*o})};function In(e){e.boundingBox;var t=e.disabled,a=e.height,n=e.width,o=r.a.useContext(ue),l=r.a.useState(!1),c=Object(ra.a)(l,2),i=c[0],s=c[1],u=r.a.useState({x:0,y:0}),m=Object(ra.a)(u,2),d=m[0],p=m[1];return r.a.createElement(zn,{onMouseDown:function(e){t||(p({x:e.clientX,y:e.clientY}),s(!0))},onMouseMove:function(e){if(!t&&i){var a={x:(e.clientX-d.x)/o.image.scale,y:(e.clientY-d.y)/o.image.scale};p({x:e.clientX,y:e.clientY}),o.image.setTranslate(a)}},onMouseUp:function(e){t||s(!1)},height:a,width:n})}function _n(){var e=Object(Ae.a)(["\n  :hover {\n    cursor: ",";\n  }\n"]);return _n=function(){return e},e}function Mn(){var e=Object(Ae.a)(["\n  height: 100%;\n  width: 100%;\n"]);return Mn=function(){return e},e}var Nn=Te.default.svg(Mn()),Fn=Te.default.g(_n(),function(e){return e.disabled?"default":"move"});function Bn(e){var t=e.disabled,a=e.height,n=e.url,o=e.transform,l=e.width,c=r.a.useRef(null),i=c.current&&c.current.getBoundingClientRect(),s=i&&i.width||0,u=i&&i.height||0,m="".concat(-s/2," ").concat(-u/2," ").concat(s||0," ").concat(u||0);return r.a.createElement(Nn,{ref:c,viewBox:m},r.a.createElement(Fn,{disabled:t,transform:o},r.a.createElement("image",{height:a,width:l,xlinkHref:n,x:-.5*l,y:-.5*a}),r.a.createElement(In,{boundingBox:i,width:l,height:a}),r.a.createElement(Ln,{x:-.5*l,y:-.5*a})))}Bn.defaultProps={disabled:!0,height:0,transform:"",url:"",width:Ia.number};var Vn=Bn;var Un=Object(pe.a)(function(){var e=r.a.useContext(ue),t=e.subjects.asyncState!==_.READY,a=r.a.useRef(null),n=r.a.useState(new Image),o=Object(ra.a)(n,2),l=o[0],c=o[1],i=function(e,t){if(!e||0===e.length)return"";var a=e[t];return Object.values(a)[0]}(e.subjects.current.locations,e.subjects.index);r.a.useEffect(function(){function t(){return n.apply(this,arguments)}function n(){return(n=Object(rt.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){return l.onload=function(){return e(l)},l.src=i,l}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function r(){return o.apply(this,arguments)}function o(){return(o=Object(rt.a)(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,c(a),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function s(){return m.apply(this,arguments)}function m(){return(m=Object(rt.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return t=e.sent,n=a.current||{},e.abrupt("return",{clientHeight:n.clientHeight,clientWidth:n.clientWidth,naturalHeight:t.naturalHeight,naturalWidth:t.naturalWidth});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function d(){return(d=Object(rt.a)(u.a.mark(function t(){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:a=t.sent,e.image.setScale(a);case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){d.apply(this,arguments)}()},[l,i,e.image]);var s=l.naturalHeight,m=l.naturalWidth,d="scale(".concat(e.image.scale,") translate(").concat(e.image.translateX,", ").concat(e.image.translateY,") rotate(").concat(e.image.rotation,")");return 0===i.length?null:r.a.createElement(Ee.a,{ref:a,fill:!0},r.a.createElement(Vn,{disabled:t,height:s,transform:d,url:i,width:m}))});function qn(){var e=Object(Ae.a)(["\n  position: absolute;\n"]);return qn=function(){return e},e}var Gn=Object(Te.default)(Ee.a)(qn());function Hn(e){var t=e.error,a=e.subjectState;return r.a.createElement(Gn,{align:"center",fill:!0,justify:"center",pad:"small"},a===_.LOADING&&r.a.createElement(ge.a,{color:"black",size:"large"},"Loading Subject..."),a===_.ERROR&&r.a.createElement(ge.a,{color:"red",size:"large"},"Error: ".concat(t)))}Hn.defaultProps={error:"",subjectState:""};var Wn=Hn;function Yn(){var e=Object(Ae.a)(["\n  pointer-events: all;\n"]);return Yn=function(){return e},e}function Xn(){var e=Object(Ae.a)(["\n  pointer-events: none;\n  position: absolute;\n"]);return Xn=function(){return e},e}function Zn(){var e=Object(Ae.a)(["\n  position: relative;\n"]);return Zn=function(){return e},e}var Jn=Object(Te.default)(Ee.a)(Zn()),Qn=Object(Te.default)(Ee.a)(Xn()),Kn=Object(Te.default)(Qn)(Yn());var $n=function(){var e=r.a.useContext(ue),t=r.a.useState(!1),a=Object(ra.a)(t,2),n=a[0],o=a[1];return r.a.createElement(Ee.a,{background:{color:"#858585"},height:"large",onMouseOver:function(t){if(e.aggregations.showModal)return null;o(!0)},onMouseLeave:function(e){return o(!1)},round:"xsmall"},r.a.createElement(un,null),r.a.createElement(Jn,{fill:!0},r.a.createElement(Qn,{fill:!0},r.a.createElement(Wn,{error:e.subjects.error,subjectState:e.subjects.asyncState}),r.a.createElement(Kn,null,n&&r.a.createElement(An,null))),r.a.createElement(Un,null)))},er=a(504),tr=a(505);function ar(){var e=Object(Ae.a)(["\n  background-color: rgba(0, 95, 255, 0.14);\n  position: absolute;\n"]);return ar=function(){return e},e}var nr=Object(Te.default)(Ee.a)(ar());function rr(e){var t=e.rotationDegrees;return r.a.createElement(nr,{align:"center",border:{color:"blue",size:"large"},height:"xsmall",justify:"center",width:"xsmall"},t&&r.a.createElement(ge.a,{color:"white",size:"xlarge"},t,"\xb0"))}function or(e){var t=e.disabled,a=e.index,n=e.isActive,o=e.rotationDegrees,l=e.selectImage,c=e.src;return r.a.createElement(Pe.a,{disabled:t,margin:"xsmall",onClick:function(){return l(a)}},r.a.createElement(Ee.a,{height:"xsmall",width:"xsmall"},n&&r.a.createElement(rr,{rotationDegrees:o}),r.a.createElement(ve.a,{alt:"Subject Page ".concat(a+1),fit:"cover",src:c})))}function lr(){var e=Object(Ae.a)(["\n  top: 0;\n  left: 0;\n  position: absolute;\n  opacity: 0.5;\n  background: inherit;\n"]);return lr=function(){return e},e}rr.defaultProps={rotationDegrees:0},or.defaultProps={disabled:!1,index:0,isActive:!1,rotationDegrees:null,selectImage:function(){},src:""};var cr=Object(Te.default)(Ee.a)(lr());function ir(){return r.a.createElement(cr,{fill:!0,round:"xsmall"})}function sr(){var e=Object(Ae.a)(["\n  position: relative;\n"]);return sr=function(){return e},e}function ur(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return ur=function(){return e},e}var mr=Object(Te.default)(ge.a)(ur()),dr=Object(Te.default)(Ee.a)(sr());function pr(e){var t=e.disabled,a=e.selectImage,n=e.subjectIndex,o=e.images,l=e.isOpen,c=e.setOpen,i=l?"Collapse":"Expand";return r.a.createElement(dr,{background:"#FFFFFF",pad:"xsmall",round:{size:"xsmall",corner:"top"}},t&&r.a.createElement(ir,null),r.a.createElement(Ee.a,{direction:"row",justify:"between"},r.a.createElement(ge.a,null,"All pages"),!l&&r.a.createElement(_t,{activeStep:n,disabled:t,setStep:a,steps:o}),r.a.createElement(Pe.a,{disabled:t,icon:l?r.a.createElement(er.a,null):r.a.createElement(tr.a,null),label:r.a.createElement(mr,null,i," Filmstrip"),gap:"xsmall",onClick:function(){c(!l)},plain:!0,reverse:!0})),l&&r.a.createElement(Ee.a,{direction:"row"},o.map(function(e,o){var l=o===n;return r.a.createElement(or,{key:"THUMBNAIL_".concat(o),disabled:t,index:o,isActive:l,selectImage:a,src:e})})))}pr.defaultProps={disabled:!1,images:[],isOpen:!0,selectImage:function(){},setOpen:function(){},subjectIndex:0};var fr=pr;var gr=Object(pe.a)(function(e){var t=e.images,a=r.a.useState(!0),n=Object(ra.a)(a,2),o=n[0],l=n[1],c=r.a.useContext(ue),i=c.aggregations.showModal;return r.a.createElement(fr,{disabled:i,images:t,isOpen:o,selectImage:function(e){c.image.reset(),c.subjects.changeIndex(e)},setOpen:l,subjectIndex:c.subjects.index})}),br=a(506);function Er(){var e=Object(Ae.a)(["\n  height: 0.5em;\n"]);return Er=function(){return e},e}var hr=Object(Te.default)(ot.a)(Er()),vr=Object(pe.a)(function(e){var t=e.datum;return r.a.createElement(Ee.a,{justify:"center",direction:"row",wrap:!0},r.a.createElement(Ee.a,{align:"center",direction:"row",justify:"center"},t.seen&&r.a.createElement(hr,{color:"green",icon:lt.a,size:"xs"}),t.flagged&&r.a.createElement(hr,{color:"tomato",icon:lt.d,size:"xs"})),r.a.createElement(Ee.a,null,t.goldStandard&&r.a.createElement(ot.a,{color:"gold",icon:lt.i,size:"xs"})))});function yr(){var e=Object(Ae.a)(["\n  cursor: ",";\n  pointer-events: ",";\n"]);return yr=function(){return e},e}function xr(){var e=Object(Ae.a)(["\n  cursor: ",";\n  pointer-events: ",";\n"]);return xr=function(){return e},e}function wr(){var e=Object(Ae.a)(["\n  pointer-events: none;\n"]);return wr=function(){return e},e}vr.defaultProps={datum:{}};var jr=Object(Te.default)(Ee.a)(wr()),Or=Object(Te.default)(Ee.a)(xr(),function(e){return e.hover?"move":"default"},function(e){return e.hover?"all":"none"}),kr=Object(Te.default)(Ee.a)(yr(),function(e){return e.hover?"pointer":"default"},function(e){return e.hover?"all":"none"});function Sr(e){e.preventDefault(),e.stopPropagation()}function Cr(e){var t=e.data,a=e.datum,n=e.dragID,o=e.index,l=e.moveData,c=e.setActiveTranscription,i=e.setDragID,s=e.setTextObject,u=r.a.useState(!1),m=Object(ra.a)(u,2),d=m[0],p=m[1],f=n===o,g=d||f?"black":"transparent",b=d||f?"small":"none",E=d||f?"xsmall":"none";return r.a.createElement(Ee.a,{border:{color:"#ECECEC",side:"bottom"},draggable:"true",elevation:b,flex:!1,gap:"xsmall",onDragEnd:function(){s(t),i(null)},onDragEnter:function(e){return function(e,t,a,n,r,o){e.preventDefault();var l=a.slice(),c=l.splice(n,1)[0];l.splice(t,0,c),o(t),r(l)}(e,o,t,n,l,i)},onDragOver:function(e){return Sr(e)},onDragStart:function(){return function(e,t,a){t(e),a(!1)}(o,i,p)},onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},margin:{right:"0.15em"},pad:"0.2em",round:E},r.a.createElement(kr,{align:"center",direction:"row",hover:d,onMouseUp:function(){return c(o)}},r.a.createElement(Or,{onMouseUp:function(e){return Sr(e)},hover:d,pad:"0.2em",basis:"4%"},r.a.createElement(jr,null,r.a.createElement(br.a,{color:g,size:"xsmall"}))),r.a.createElement(jr,{basis:"76%"},r.a.createElement(ge.a,null,a.edited_consensus_text||a.consensus_text)),r.a.createElement(jr,{basis:"10%"},r.a.createElement(vr,{datum:a})),r.a.createElement(jr,{align:"end",basis:"10%",pad:{right:"0.25em"}},a.edited_consensus_text?r.a.createElement(ge.a,null,"Edited"):r.a.createElement(ge.a,null,parseFloat(a.consensus_score.toFixed(1)),"/",a.number_views))))}Cr.defaultProps={datum:{consensus_score:0,consensus_text:"",edited_consensus_text:"",number_views:0},data:[],dragID:null,index:null,moveData:function(){},setDragID:function(){},setActiveTranscription:function(){}};var Ar=Object(pe.a)(Cr);function Rr(){var e=Object(Ae.a)(["\n  margin-left: auto;\n  text-align: end;\n"]);return Rr=function(){return e},e}function Dr(){var e=Object(Ae.a)(["\n  font-weight: normal;\n  line-height: 1.25em;\n  margin: 0;\n  text-transform: uppercase;\n"]);return Dr=function(){return e},e}function Pr(){var e=Object(Ae.a)(["\n  position: absolute;\n"]);return Pr=function(){return e},e}var Tr=Object(Te.default)(Ee.a)(Pr()),Lr=Object(Te.default)("h6")(Dr()),zr=Object(Te.default)(Lr)(Rr());function Ir(e){var t=e.data,a=e.setActiveTranscription,n=e.setTextObject,o=r.a.useState(t),l=Object(ra.a)(o,2),c=l[0],i=l[1],s=r.a.useState(null),u=Object(ra.a)(s,2),m=u[0],d=u[1],p=0===t.length;r.a.useEffect(function(){return i(t)},[t]);var f=p?{color:"light-2",opacity:"strong"}:{};return r.a.createElement(Ee.a,{round:{size:"xsmall",corner:"bottom"}},r.a.createElement(Ee.a,{align:"center",direction:"row",margin:{horizontal:"xsmall"},pad:{vertical:"xsmall"}},r.a.createElement(Ee.a,{basis:"80%",margin:{left:"xsmall"}},r.a.createElement(Lr,null,"Aggregated Transcription")),r.a.createElement(Ee.a,null,r.a.createElement(Lr,null,"Flag")),r.a.createElement(Ee.a,null,r.a.createElement(zr,null,"Consensus Score"))),r.a.createElement(Ee.a,{pad:{bottom:"xsmall"}},c.map(function(e,t){return r.a.createElement(Ar,{data:c,datum:e,dragID:m,index:t,key:"TRANSCRIPTION_ROW_".concat(t),moveData:i,setActiveTranscription:a,setDragID:d,setTextObject:n})})),p&&r.a.createElement(Tr,{background:f,fill:!0,pad:"medium"},r.a.createElement(ge.a,{size:"xsmall"},"This page does not contain transcription data.")))}Ir.defaultProps={data:[],setActiveTranscription:function(){}};var _r=Object(pe.a)(Ir);var Mr=Object(pe.a)(function(){var e=r.a.useContext(ue),t=e.transcriptions.current&&e.transcriptions.current.text,a=t&&t.get("frame".concat(e.subjects.index))||[];return r.a.createElement(_r,{data:a,setActiveTranscription:function(t){return e.transcriptions.setActiveTranscription(t)},setTextObject:e.transcriptions.setTextObject})}),Nr=a(518);function Fr(){var e=Object(Ae.a)(["\n  flex: 0 0 auto;\n"]);return Fr=function(){return e},e}function Br(){var e=Object(Ae.a)(["\n  font-style: italic;\n"]);return Br=function(){return e},e}var Vr=Object(Te.default)(ge.a)(Br()),Ur=Object(Te.default)(Ee.a)(Fr());function qr(e){var t=e.selectedItem,a=e.setItem,n=e.transcription,o=e.index;return r.a.createElement(Ee.a,{height:{min:"2em"}},r.a.createElement(Ee.a,{direction:"row",justify:"between"},r.a.createElement(Ee.a,{direction:"row"},r.a.createElement(Ur,{align:"end",background:Rn(o),height:"fit-content",pad:"0.15em",width:"1.75em"},r.a.createElement(Nr.a,{checked:t===o,onChange:function(){a(t===o?null:o)}})),r.a.createElement(ge.a,{alignSelf:"center",margin:{horizontal:"xsmall"}},n.text)),n.goldStandard&&r.a.createElement(Ee.a,{alignSelf:"center",margin:{horizontal:"xsmall"}},r.a.createElement(ot.a,{color:"gold",icon:lt.i,size:"xs"}))),r.a.createElement(Ee.a,{direction:"row",margin:{left:"4em"}},r.a.createElement(Vr,null,n.date),r.a.createElement(ge.a,{margin:{horizontal:"xsmall"}},"\u2022"),r.a.createElement(Vr,{size:"xsmall"},n.userName),n.goldStandard&&r.a.createElement(Ee.a,{direction:"row"},r.a.createElement(ge.a,{margin:{horizontal:"xsmall"}},"\u2022"),r.a.createElement(Vr,null,"Gold Standard"))))}qr.defaultProps={selectedItem:null,setItem:function(){},transcription:{date:"",goldStandard:!1,text:"",userName:""},index:0};var Gr=Object(pe.a)(qr),Hr=a(493);var Wr=function(e,t){return function(a){return r.a.createElement(Hr.a.Extend,{value:t},r.a.createElement(e,a))}},Yr=a(480);function Xr(){var e=Object(Ae.a)(["\n  height: 0.5em;\n  opacity: ",";\n"]);return Xr=function(){return e},e}var Zr=Object(Te.default)(ot.a)(Xr(),function(e){return e.dim?.25:1});function Jr(e){var t=e.onShowFlag,a=e.setFlag,n=e.showFlag,o=e.seenButton,l=e.tag,c=r.a.useRef(null),i=o?"green":"tomato",s=o?lt.a:lt.d,u=o?"MARK AS SEEN":"FLAG";return r.a.createElement(Ee.a,null,r.a.createElement(Pe.a,{onClick:a,onMouseOver:function(){return t(!0)},onMouseOut:function(){return t(!1)},plain:!0,ref:c},r.a.createElement(Zr,{color:i,dim:l?0:1,icon:s,size:"xs"})),n&&r.a.createElement(Yr.a,{align:{right:"right",top:"bottom"},plain:!0,target:c.current},r.a.createElement(Ee.a,{align:"center",background:"light-3",direction:"row",elevation:"medium",gap:"0.25em",margin:"0.5em",pad:"xsmall",round:"xsmall"},r.a.createElement(Zr,{color:i,icon:s,size:"xs"}),r.a.createElement(ge.a,null,u))))}Jr.defaultProps={onShowFlag:function(){},seenButton:!1,setFlag:function(){},showFlag:!1,tag:!1};var Qr=Jr;function Kr(e){var t=e.reduction,a=e.tag,n=r.a.useState(!1),o=Object(ra.a)(n,2),l=o[0],c=o[1];return r.a.createElement(Qr,{onShowFlag:c,setFlag:function(){return t.toggleCurrentFlag()},showFlag:l,tag:a})}function $r(e){var t=e.reduction,a=e.tag,n=r.a.useState(!1),o=Object(ra.a)(n,2),l=o[0],c=o[1];return r.a.createElement(Qr,{seenButton:!0,onShowFlag:c,setFlag:function(){return t.toggleCurrentSeen()},showFlag:l,tag:a})}var eo={checkBox:{check:{radius:"0"},color:"black",hover:{border:{color:{dark:"black",light:"black"}}},icon:{extend:{background:"black"}},size:"0.5em",extend:function(e){return"\n      div {\n        border: none\n      }\n\n      > div {\n        background: white;\n        border: 0.5px solid black;\n      }\n    "}},textInput:{container:{extend:function(e){return"\n        input {\n          font-style: italic;\n          padding: 0.2em;\n        }\n      "}}}};function to(){var e=Object(Ae.a)(["\n  font-style: italic;\n"]);return to=function(){return e},e}function ao(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return ao=function(){return e},e}var no=Object(Te.default)(ge.a)(ao()),ro=Object(Te.default)(ge.a)(to());function oo(e){var t=e.algorithmChoice,a=e.closeModal,n=e.consensusText,o=e.flagged,l=e.inputText,c=e.reduction,i=e.selectedItem,s=e.seen,u=e.setInputText,m=e.setItem,d=e.transcriptionOptions,p=e.typedChoice;return r.a.createElement(Ee.a,{background:"white",elevation:"small",round:"xsmall",width:"large"},r.a.createElement(Ee.a,{border:"bottom",pad:{top:"xsmall",horizontal:"xsmall"}},r.a.createElement(Ee.a,{align:"center",direction:"row",justify:"between"},r.a.createElement(Ee.a,{basis:"80%"},r.a.createElement(no,{size:"0.6em",weight:"bold"},"Selected Transcription")),r.a.createElement(Ee.a,{align:"center",basis:"20%",direction:"row",gap:"xsmall"},r.a.createElement(no,{size:"0.6em",weight:"bold"},"Flag"),r.a.createElement(no,{textAlign:"end",size:"0.6em",weight:"bold"},"Consensus Score"))),r.a.createElement(Ee.a,{align:"center",direction:"row",gap:"xsmall",justify:"between"},r.a.createElement(Ee.a,{fill:"horizontal"},r.a.createElement(ge.a,{weight:"bold"},n)),r.a.createElement(Ee.a,{direction:"row",margin:{bottom:"0.5em"}},r.a.createElement($r,{reduction:c,tag:s}),r.a.createElement(Kr,{reduction:c,tag:o})),r.a.createElement(Ee.a,null,c.edited_consensus_text?r.a.createElement(ge.a,null,"Edited"):r.a.createElement(ge.a,null,parseFloat(c.consensus_score.toFixed(1)),"/",c.number_views)))),r.a.createElement(Ee.a,{border:"bottom"},r.a.createElement(Ee.a,{gap:"xsmall",margin:{vertical:"xsmall"},overflow:"auto"},d.map(function(e,t){return r.a.createElement(Gr,{transcription:e,index:t,key:"LINE_".concat(t),selectedItem:i,setItem:m})})),r.a.createElement(Ee.a,{border:"top",gap:"xsmall",margin:{horizontal:"small",bottom:"xsmall"},pad:{top:"xsmall"}},r.a.createElement(Ee.a,null,r.a.createElement(Ee.a,{direction:"row",gap:"xsmall"},r.a.createElement(Nr.a,{checked:i===t,onChange:function(){m(i===t?null:t)}}),r.a.createElement(ge.a,null,c.consensus_text)),r.a.createElement(ro,{margin:{left:"medium"},size:"xsmall"},"aggregated transcription (via algorithm)")),r.a.createElement(Ee.a,{direction:"row",gap:"xsmall"},r.a.createElement(Nr.a,{checked:i===p,onChange:function(){m(i===p?null:p)}}),r.a.createElement(Ee.a,{fill:"horizontal"},r.a.createElement(De.a,{onChange:function(e){u(e.target.value),e.target.value.length&&i!==p?m(p):e.target.value.length||m(null)},placeholder:"Write new...",size:"xsmall",value:l}))))),r.a.createElement(Ee.a,{direction:"row",justify:"between",margin:{horizontal:"xsmall",bottom:"xsmall",top:"0.25em"}},r.a.createElement(Ee.a,{direction:"row"},r.a.createElement(Pe.a,{margin:{right:"small"}},r.a.createElement(no,{size:"xsmall"},"Add Line Below")),r.a.createElement(Pe.a,null,r.a.createElement(no,{size:"xsmall"},"Delete Line"))),r.a.createElement(Ee.a,{direction:"row",gap:"small"},r.a.createElement(Pe.a,{disabled:null===i,onClick:function(){var e="";e=i===t?c.consensus_text:i===p?l:d[i].text;var a=i===t;c.setConsensusText(e,a)}},r.a.createElement(no,{size:"xsmall"},"Replace With Selected")),r.a.createElement(Pe.a,{onClick:a},r.a.createElement(no,{size:"xsmall"},"Close")))))}oo.defaultProps={closeModal:function(){},consensusText:"",flagged:!1,reduction:{consensus_score:0},replaceWithSelected:function(){},seen:!1,selectedItem:null,setItem:function(){}};var lo=Object(pe.a)(Wr(oo,eo));var co=Object(pe.a)(function(){var e=r.a.useContext(ue),t=r.a.useState(""),a=Object(ra.a)(t,2),n=a[0],o=a[1],l=r.a.useState(),c=Object(ra.a)(l,2),i=c[0],s=c[1],u=e.transcriptions.activeTranscriptionIndex,m=e.transcriptions.current&&e.transcriptions.current.text&&e.transcriptions.current.text.get("frame".concat(e.subjects.index))[u],d=m&&(m.edited_consensus_text||m.consensus_text),p=r.a.useState([]),f=Object(ra.a)(p,2),g=f[0],b=f[1],E=g.length+1;return r.a.useEffect(function(){var e=Tn(m).map(function(e,t){return{date:"",goldStandard:m.gold_standard&&m.gold_standard[t]||!1,userName:"Anonymous",text:e}});b(e)},[m]),r.a.createElement(lo,{algorithmChoice:g.length,closeModal:function(t){return e.transcriptions.setActiveTranscription(void 0)},consensusText:d,flagged:m&&m.flagged,inputText:n,reduction:m,seen:m&&m.seen,selectedItem:i,setInputText:o,setItem:function(e){e!==E&&n.length&&o(""),s(e)},transcriptionOptions:g,typedChoice:E})});function io(){var e=Object(Ae.a)(["\n  overflow: auto;\n  &::-webkit-scrollbar-thumb {\n    background-color: #BABABA;\n    border: 5px solid transparent;\n    border-radius: 1em;\n    background-clip: content-box;\n  }\n  &::-webkit-scrollbar {\n    border-radius: 0.5em;\n  }\n  &::-webkit-scrollbar {\n    background: white;\n    width: 0.9em;\n  }\n"]);return io=function(){return e},e}function so(){var e=Object(Ae.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  width: auto;\n"]);return so=function(){return e},e}function uo(){var e=Object(Ae.a)(["\n  position: relative;\n"]);return uo=function(){return e},e}function mo(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return mo=function(){return e},e}var po=Object(Te.default)(ge.a)(mo()),fo=Object(Te.default)(Ee.a)(uo()),go=Object(Te.default)(Ee.a)(so()),bo=Object(Te.default)(Ee.a)(io());function Eo(e){var t=e.margin,a=e.showOverlay,n=e.showTranscription;return r.a.createElement(fo,{height:"large"},r.a.createElement(Ee.a,{background:"white",fill:"vertical",margin:t,round:"xsmall"},r.a.createElement(Ee.a,{border:{color:"light-5",side:"bottom"},direction:"row",justify:"between",pad:{left:"1em",right:"xsmall",bottom:"xsmall",top:"xsmall"}},r.a.createElement(ge.a,null,"Transcribed Text"),r.a.createElement(po,{size:"xsmall"},"Add Line")),r.a.createElement(bo,{fill:"vertical"},r.a.createElement(Mr,null)),(a||n)&&r.a.createElement(go,{background:{color:"white",opacity:"medium"},fill:!0,margin:t,opacity:"0.5",round:"xsmall"},r.a.createElement(ir,null))),n&&r.a.createElement(go,{align:"center",background:"transparent",pad:{right:"small"},fill:!0,justify:"center"},r.a.createElement(co,null)))}Eo.defaultProps={margin:{},showOverlay:!1,showTranscription:!1};var ho=Object(pe.a)(Eo);var vo=Object(pe.a)(function(e){var t=e.margin,a=r.a.useContext(ue),n=a.aggregations.showModal||a.transcriptions.approved,o=void 0!==a.transcriptions.activeTranscriptionIndex;return r.a.createElement(ho,{margin:t,showOverlay:n,showTranscription:o})}),yo=33;var xo=Object(c.g)(Object(pe.a)(function(e){var t=e.match,a=r.a.useContext(ue),n=r.a.useRef(null);r.a.useEffect(function(){!function(){var e=Object(rt.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getResources(t.params);case 2:return e.next=4,a.subjects.fetchSubject(t.params.subject);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[t,a]);var o=a.aggregations.showModal||a.transcriptions.approved,l=function(e){return e&&e.locations?e.locations.map(function(e){return e[Object.keys(e)[0]]}):[]}(a.subjects.current),c=a.editor.layout,i=r.a.useState(50),s=Object(ra.a)(i,2),m=s[0],d=s[1],p=r.a.useState(50),f=Object(ra.a)(p,2),g=f[0],b=f[1],E=r.a.useState(!1),h=Object(ra.a)(E,2),v=h[0],y=h[1],x=r.a.useState(),w=Object(ra.a)(x,2),j=w[0],O=w[1],k=function(e){var t=n.current.getBoundingClientRect();O("row"===c?{x:e.clientX-t.left}:{y:e.clientY-t.top})},S="row"===c?{left:"medium",right:"xsmall"}:{horizontal:"medium",bottom:"xsmall"},C="row"===c?{right:"medium",left:"xsmall"}:{horizontal:"medium",top:"xsmall"};return r.a.createElement(Ee.a,null,r.a.createElement(Ee.a,{gap:"small"},r.a.createElement(Ee.a,{direction:c,height:"large",onMouseLeave:function(){y(!1)},onMouseMove:function(e){v&&(function(e){var t=("row"===c?j.x/n.current.clientWidth*100:j.y/n.current.clientHeight*100).toFixed(0),a=100-t;t>yo&&a>yo&&(d(t),b(a))}(),k(e),e.preventDefault())},onMouseUp:function(){y(!1)},ref:n},r.a.createElement(Ee.a,{basis:"".concat(m,"%"),margin:S},r.a.createElement($n,null)),r.a.createElement(Ta,{direction:c,disabled:o,onMouseDown:function(e){if(o)return null;y(!0),k(e)}}),r.a.createElement(Ee.a,{basis:"".concat(g,"%")},r.a.createElement(vo,{margin:C}))),r.a.createElement(Ee.a,{margin:{horizontal:"medium"}},r.a.createElement(gr,{images:l}))),a.aggregations.showModal&&r.a.createElement(cn,{ref:n}))}));function wo(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return wo=function(){return e},e}var jo=Object(Te.default)(ge.a)(wo());function Oo(e){var t=e.history,a=(e.match,e.onEditor),n=r.a.useContext(ue),o=n.projects.title||"",l=n.workflows.title||"",i=n.groups.title||"",s=n.transcriptions.title||"",u=[{title:s},{title:i,path:vt,to:"Subjects Index Page"},{title:l,path:ht,to:"Groups Index Page"},{title:o,path:Et,to:"Workflows Index Page"},{title:"Projects",path:gt,to:"Projects Index Page"}];("Select Project"===o||a)&&u.pop();var m=u.findIndex(function(e){return e.title.length>0}),d=u[m];u.splice(m,1),a&&(u=[{title:i,path:vt,to:"Subjects Index Page"}],d={title:s});var p=d.title===i?"(".concat(n.transcriptions.approvedCount,"/").concat(n.transcriptions.all.size," approved)"):"";return r.a.createElement(Ee.a,{align:"baseline"},r.a.createElement(Ee.a,{direction:"row"},u.reverse().map(function(e,a){var o=u[a+1],l=a===u.length-1||0===o.title.length;return e.title.length>0&&r.a.createElement(Pe.a,{key:"SUB_HEADER_".concat(a),a11yTitle:e.to,disabled:n.aggregations.showModal,label:r.a.createElement(jo,{key:"SUB_HEADER_".concat(a),color:"#5C5C5C"},"".concat(e.title," ").concat(l?"":"/")),onClick:function(){return function(e){var a=Object(c.e)(t.location.pathname,{path:e}),n=Object(c.d)(e,a.params);t.push(n)}(e.path)},plain:!0})})),r.a.createElement(Ee.a,{align:"baseline",direction:"row",gap:"0.5em"},r.a.createElement(ke.a,{margin:"0em"},d.title),p.length>0&&r.a.createElement(jo,{color:"#5C5C5C"},p)))}Oo.defaultProps={onEditer:!1};var ko=Object(c.g)(Object(pe.a)(Oo));function So(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return So=function(){return e},e}function Co(){var e=Object(Ae.a)(["\n  text-decoration: none;\n"]);return Co=function(){return e},e}var Ao=Object(Te.default)(we.a)(Co()),Ro=Object(Te.default)(ge.a)(So());function Do(e){var t=e.user?"/projects":"/";return r.a.createElement(Ao,{to:t},r.a.createElement(Ro,{color:"#5C5C5C"},"Back to Viewer/Editor"))}function Po(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return Po=function(){return e},e}Do.defaultProps={user:null};var To=Object(Te.default)(ge.a)(Po());function Lo(e){var t=e.disabled,a=e.goldStandard,n=e.id,o=e.lines,l=e.metadata,c=e.pages,i=e.score,s=e.status,u=e.transcribers,m=r.a.useRef(null),d=r.a.useState(!1),p=Object(ra.a)(d,2),f=p[0],g=p[1];return r.a.createElement(Ee.a,{width:"1em"},r.a.createElement(Pe.a,{a11yTitle:"Open Metadata Information",disabled:t,icon:r.a.createElement(ot.a,{icon:lt.e}),onClick:g,plain:!0,ref:m}),f&&r.a.createElement(Yr.a,{align:{top:"bottom",left:"right"},onClickOutside:g,target:m.current},r.a.createElement(Ee.a,{background:"white",gap:"xsmall",pad:"small"},r.a.createElement(Ee.a,{direction:"row",justify:"between"},r.a.createElement(ge.a,{size:"large"},"Subject ".concat(n)),r.a.createElement(Pe.a,{onClick:function(){g(!1)},plain:!0},r.a.createElement(ot.a,{icon:lt.j,size:"xs"}))),r.a.createElement(Ee.a,{direction:"row"},r.a.createElement(To,{size:"xsmall"},c," pages \u2022 ",u,"/",a," transcribers/gold standard \u2022 ",o," transcribed lines \u2022 ",i,"/",u," average consensus \u2022 ",s)),r.a.createElement(Ee.a,{gap:"xsmall"},l&&Object.keys(l).map(function(e,t){return r.a.createElement(Ee.a,{direction:"row",key:"METADATA_VALUE_".concat(t)},r.a.createElement(Ee.a,{basis:"1/3"},r.a.createElement(To,null,e)),r.a.createElement(Ee.a,{basis:"2/3"},r.a.createElement(ge.a,null,l[e])))})))))}Lo.defaultProps={disabled:!1,goldStandard:0,id:"",lines:0,metadata:null,pages:0,score:0,transcribers:0};var zo=Object(pe.a)(function(){var e=r.a.useContext(ue),t=e.subjects.current&&e.subjects.current.metadata,a=e.subjects.current&&e.subjects.current.id,n=e.transcriptions.current&&e.transcriptions.current.status;return r.a.createElement(Lo,{disabled:e.aggregations.showModal,id:a,metadata:t,status:n})}),Io=a(507),_o=a(154),Mo=a.n(_o);function No(){var e=Object(Ae.a)(["\n  background: ","\n  pointer-events: ","\n  text-decoration: none;\n\n  :hover {\n    background: #D8D8D8;\n  }\n"]);return No=function(){return e},e}function Fo(){var e=Object(Ae.a)(["\n  :hover {\n    background: #D8D8D8;\n  }\n"]);return Fo=function(){return e},e}function Bo(){var e=Object(Ae.a)(["\n  line-height: 10px;\n  text-transform: uppercase;\n"]);return Bo=function(){return e},e}function Vo(){var e=Object(Ae.a)(["\n  border-radius: 100%;\n  height: 2.5em;\n  width: auto;\n  margin-left: 0.75em;\n  object-fit: cover;\n"]);return Vo=function(){return e},e}var Uo=Te.default.img(Vo()),qo=Object(Te.default)(ge.a)(Bo()),Go=Object(Te.default)(Pe.a)(Fo()),Ho=Object(Te.default)(we.a)(No(),function(e){return e.disabled?"#D8D8D8":"inherit"},function(e){return e.disabled?"none":"all"});function Wo(e){var t=e.disabled,a=e.isOpen,n=e.name,o=e.onAbout,l=e.role,c=e.setOpen,i=e.signOut,s=e.src,u=a?er.a:tr.a;return r.a.createElement(Ee.a,{align:"center",direction:"row",gap:"xsmall"},r.a.createElement(Uo,{alt:"".concat(n," Avatar"),fallback:Mo.a,src:s}),r.a.createElement(Ee.a,null,r.a.createElement(ge.a,{weight:"bold"},n),r.a.createElement(qo,{color:"dark-5",size:"small"},l)),r.a.createElement(Io.a,{alignSelf:"center",disabled:t,dropAlign:{right:"right",top:"bottom"},label:r.a.createElement(Ee.a,null,r.a.createElement(u,null)),dropContent:r.a.createElement(Ee.a,{background:"white",width:"5em",pad:{vertical:"xxsmall"}},r.a.createElement(Ho,{disabled:o,margin:"1em",to:"/about",tabIndex:o?-1:void 0},r.a.createElement(qo,{color:"#5C5C5C",margin:"1em"},"Help")),r.a.createElement(Ho,{disabled:!o,margin:"1em",to:"/projects",tabIndex:o?void 0:-1},r.a.createElement(qo,{color:"#5C5C5C",margin:"1em"},"Viewer")),r.a.createElement(Go,{label:r.a.createElement(qo,{margin:"1em"},"Log out"),onClick:i,plain:!0})),onClose:function(){return c(!1)},onOpen:function(){return c(!0)},open:a,plain:!0}))}Wo.defaultProps={disabled:!1,isOpen:!1,name:"",onAbout:!1,role:"",setOpen:function(){},signOut:function(){},src:Mo.a};var Yo=Wo;var Xo=Object(pe.a)(function(e){var t=e.onAbout,a=r.a.useContext(ue),n=r.a.useState(!1),o=Object(ra.a)(n,2),l=o[0],c=o[1],i=a.auth.user,s=a.aggregations.showModal,u=i&&i.display_name,m=a.auth.logout,d=i&&i.avatar_src;return r.a.createElement(Yo,{disabled:s,isOpen:l,name:u,onAbout:t,role:a.projects.role,setOpen:c,signOut:m,src:d})});function Zo(){var e=Object(Ae.a)(["\n  position: relative;\n"]);return Zo=function(){return e},e}function Jo(){var e=Object(Ae.a)(["\n  min-height: 3.25em;\n"]);return Jo=function(){return e},e}var Qo=Object(Te.default)(Ee.a)(Jo()),Ko=Object(Te.default)(Ee.a)(Zo());function $o(e){var t=e.buttons,a=e.disabled,n=e.onAbout,o=e.showMetadata,l=e.user;return r.a.createElement(Ee.a,{as:"header",border:"bottom",direction:"row",pad:{bottom:"small"},justify:"between"},r.a.createElement(Qo,{align:"center",direction:"row",gap:"xsmall",wrap:!0},n?r.a.createElement(Do,{user:l}):r.a.createElement(ko,{onEditor:o}),o&&r.a.createElement(zo,null)),!!l&&r.a.createElement(Ko,{align:"center",background:"light-2",direction:"row"},r.a.createElement(Ee.a,{direction:"row",border:"right",fill:"vertical",gap:"small",pad:"small",wrap:!0},t.map(function(e,t){return r.a.createElement(e,{key:"HEADER_BUTTON_".concat(t),disabled:a})})),r.a.createElement(Xo,{onAbout:n})))}function el(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return el=function(){return e},e}$o.defaultProps={buttons:[],onAbout:!1,showMetadata:!1,showOverlay:!1,user:null};var tl=Object(Te.default)(ge.a)(el());function al(e){var t=e.disabled,a=e.icon,n=e.label,o=e.onClick;return r.a.createElement(Pe.a,{disabled:t,gap:"xsmall",icon:a,label:r.a.createElement(tl,{color:"#5C5C5C"},n),onClick:o,plain:!0,reverse:!0})}al.defaultProps={disabled:!1,icon:null,label:"",onClick:function(){}};var nl=al;function rl(e){var t=e.disabled,a=r.a.useContext(ue);return r.a.createElement(nl,{disabled:t,label:"Search",onClick:function(e){return a.modal.toggleModal(xt.SEARCH)}})}var ol=Object(pe.a)(function(e){var t=e.disabled,a=r.a.useContext(ue),n=t||0===a.transcriptions.approvedCount;return r.a.createElement(nl,{disabled:n,label:"Download Approved Subject Set Data",onClick:function(){return a.modal.toggleModal(xt.DOWNLOAD_GROUP)}})}),ll={checkBox:{color:{light:"white",dark:"white"},toggle:{extend:function(e){var t=e.checked;return"\n        ".concat(t?"background-color: #078F52;":"background-color: #D8D8D8","\n      ")}}}};function cl(){var e=Object(Ae.a)(["\n  text-align: end;\n  text-transform: uppercase;\n"]);return cl=function(){return e},e}var il=Object(Te.default)(ge.a)(cl());function sl(e){var t=e.checked,a=e.isResearcher,n=e.onChange,o=a?"Mark As Approved":"Ready For Review";return r.a.createElement(Nr.a,{checked:t,label:r.a.createElement(il,{color:"#5C5C5C"},o),onChange:n,reverse:!0,toggle:!0})}sl.defaultProps={checked:!1,isResearcher:!1,onChange:function(){}};var ul=Wr(sl,ll);var ml=Object(pe.a)(function(){var e=r.a.useContext(ue),t=e.projects.isResearcher,a=t?e.transcriptions.approved:e.transcriptions.approved||e.transcriptions.readyForReview,n=t?function(){a?e.modal.toggleModal(xt.UNAPPROVED):e.transcriptions.updateApproval(a)}:function(){return e.transcriptions.updateApproval(a)};return r.a.createElement(ul,{checked:a,isResearcher:e.projects.isResearcher,onChange:n})});var dl=function(e){var t=e.disabled;return r.a.createElement(nl,{disabled:t,icon:r.a.createElement(vn.a,{color:"#555555",size:"small"}),label:"Undo",onClick:function(){return console.log("Undo Button Clicked")}})};var pl=function(e){var t=e.disabled,a=r.a.useContext(ue);return r.a.createElement(nl,{disabled:t,icon:r.a.createElement(ot.a,{color:"#555555",icon:lt.g,size:"xs"}),label:"Save",onClick:function(){return a.transcriptions.saveTranscription()}})};var fl=Object(pe.a)(function(e){var t=e.disabled,a=r.a.useContext(ue),n="row"===a.editor.layout?"#555555":"#CCCCCC",o="column"===a.editor.layout?"#555555":"#CCCCCC";return r.a.createElement(nl,{disabled:t,icon:r.a.createElement(Ee.a,{direction:"row",gap:"xxsmall"},r.a.createElement(ot.a,{color:n,icon:lt.f,size:"xs"}),r.a.createElement(ot.a,{color:o,icon:lt.f,rotation:90,size:"xs"})),label:"Layout",onClick:function(e){a.editor.toggleLayout()}})});function gl(e){var t=e.disabled,a=e.disableEditingAggregations,n=e.isOpen,o=e.setOpen,l=e.toggleDownload,c=r.a.useContext(ue),i=n?er.a:tr.a;return r.a.createElement(Io.a,{label:r.a.createElement(Ee.a,{align:"center",direction:"row"},r.a.createElement(ge.a,{color:"#5C5C5C"},"MORE"),r.a.createElement(i,null)),disabled:t,dropAlign:{top:"bottom",right:"right"},dropContent:r.a.createElement(Ee.a,{background:"white",gap:"small",pad:"small"},r.a.createElement(nl,{disabled:!a,label:"Download Subject Data",onClick:function(){o(!1),l()}}),r.a.createElement(nl,{disabled:a,label:"Edit Aggregation Settings",onClick:function(){o(!1),c.aggregations.toggleModal()}})),onClose:function(){return o(!1)},onOpen:function(){return o(!0)},open:n,plain:!0})}function bl(){var e=r.a.useContext(ue),t=r.a.useState(!1),a=Object(ra.a)(t,2),n=a[0],o=a[1],l=e.aggregations.showModal,c=e.transcriptions.approved;return r.a.createElement(gl,{disabled:l,disableEditingAggregations:c,isOpen:n,setOpen:o,toggleDownload:function(){return e.modal.toggleModal(xt.DOWNLOAD_SUBJECT)}})}function El(e,t){var a=Object(c.e)(e,{path:t});return!(!a||!a.isExact)}gl.defaultProps={disabled:!1,disableEditingAggregations:!1,isOpen:!1,setOpen:function(){},toggleDownload:function(){}};var hl=Object(c.g)(Object(pe.a)(function(e){var t,a=e.history,n=r.a.useContext(ue),o=El(t=a.location.pathname,vt)?[ol,rl]:El(t,yt)?[ml,dl,pl,fl,bl]:[],l=n.aggregations.showModal||n.transcriptions.approved,c=El(a.location.pathname,bt),i=El(a.location.pathname,yt);return r.a.createElement($o,{buttons:o,disabled:l,onAbout:c,showMetadata:i,user:n.auth.user})})),vl=function(){return r.a.createElement(Ee.a,{margin:"medium",fill:"vertical"},r.a.createElement(hl,null))};function yl(){var e=Object(Ae.a)(["\n  line-height: 1.75em;\n"]);return yl=function(){return e},e}var xl=Object(Te.default)(ge.a)(yl());function wl(e){var t=e.onClose,a=e.onUnapprove;return r.a.createElement(Ee.a,{background:"white",elevation:"small",gap:"xsmall",pad:"small",round:"xsmall",width:"medium"},r.a.createElement(Ee.a,{direction:"row",justify:"between"},r.a.createElement(ge.a,{size:"large"},"Unapprove subject data"),r.a.createElement(Pe.a,{a11yTitle:"Close Unapprove Subject Modal",label:r.a.createElement(ot.a,{icon:lt.j,size:"xs"}),onClick:t,plain:!0})),r.a.createElement(xl,null,"By unapproving this subject, the subject's data will be unavailable for future downloads until re-marked as approved."),r.a.createElement(xl,null,"This action can be reversed at any time."),r.a.createElement(Ee.a,{direction:"row",justify:"between",margin:{top:"small"}},r.a.createElement(Pe.a,{a11yTitle:"Close Unapprove Subject Modal",label:r.a.createElement(ge.a,{size:"small"},"CLOSE AND CANCEL"),onClick:t,plain:!0}),r.a.createElement(Pe.a,{a11yTitle:"Confirm to Unapprove Subject",label:r.a.createElement(ge.a,{size:"small"},"YES, UNAPPROVE"),onClick:a,plain:!0})))}function jl(){var e=r.a.useContext(ue),t=function(){return e.modal.toggleModal("")};return r.a.createElement(wl,{onClose:t,onUnapprove:function(){e.transcriptions.updateApproval(!0),t()}})}function Ol(e){var t=e.approved,a=e.entireGroup,n=e.onClose,o=e.transcriptionCount,l=a?"Download approved subject set data":"Download subject data";return r.a.createElement(Ee.a,{background:"white",elevation:"small",gap:"xsmall",pad:"small",round:"xsmall"},r.a.createElement(Ee.a,{direction:"row",gap:"small",justify:"between"},r.a.createElement(ge.a,{size:"large"},l),r.a.createElement(Pe.a,{a11yTitle:"Close Download Subject Data Modal",icon:r.a.createElement(ot.a,{icon:lt.j,size:"xs"}),onClick:n,plain:!0})),a&&r.a.createElement(ge.a,null,"".concat(t,"/").concat(o," SUBJECTS APPROVED")),r.a.createElement(ge.a,{margin:{top:"xsmall"}},"Download a .zip file containing:"),r.a.createElement(Ee.a,{gap:"xsmall"},r.a.createElement(ge.a,{size:"small"},"\u2022 Line by line transcription and metadata (.csv)"),r.a.createElement(ge.a,{size:"small"},"\u2022 Text-only file (.txt)"),r.a.createElement(ge.a,{size:"small"},"\u2022 Raw, unparsed transcription data (.json)")),r.a.createElement(Ee.a,{direction:"row",justify:"between",margin:{top:"small"}},r.a.createElement(Pe.a,{a11yTitle:"Close Download Subject Data Modal",label:r.a.createElement(ge.a,{size:"small"},"CLOSE"),onClick:n,plain:!0}),r.a.createElement(Pe.a,{a11yTitle:"Download Subject Data",label:r.a.createElement(ge.a,{size:"small"},"DOWNLOAD"),plain:!0})))}function kl(e){var t=e.entireGroup,a=r.a.useContext(ue);return r.a.createElement(Ol,{approved:a.transcriptions.approvedCount,entireGroup:t,onClose:function(){return a.modal.toggleModal("")},transcriptionCount:a.transcriptions.all.size})}function Sl(){var e=Object(Ae.a)(["\n  line-height: 1.75em;\n"]);return Sl=function(){return e},e}wl.defaultProps={onClose:function(){},onUnapprove:function(){}},Ol.defaultProps={approved:Ia.number,entireGroup:!1,onClose:function(){},transcriptionCount:0},kl.defaultProps={entireGroup:!1};var Cl=Object(Te.default)(ge.a)(Sl());function Al(e){var t=e.onBack;return r.a.createElement(Ee.a,{background:"white",elevation:"small",gap:"xsmall",pad:"small",round:"xsmall",width:"medium"},r.a.createElement(ge.a,{size:"large"},"Subject locked"),r.a.createElement(Cl,null,"This subject cannot be accessed because ",r.a.createElement("b",null,"Erin Green")," is currently accessing it."),r.a.createElement(Cl,null,"For access, ask them to close their version."),r.a.createElement(Pe.a,{a11yTitle:"Return to Group Index Page",label:r.a.createElement(ge.a,{size:"small"},"BACK TO GROUP INDEX"),onClick:t,plain:!0}))}Al.defaultProps={onBack:function(){}};var Rl=Object(c.g)(function(e){var t=r.a.useContext(ue);return r.a.createElement(Al,{onBack:function(){t.modal.toggleModal("");var a=Object(c.e)(e.history.location.pathname,{path:vt});if(a){var n=Object(c.d)(vt,a.params);e.history.push(n)}}})}),Dl=a(510),Pl={checkBox:{border:{width:"0.05em"},gap:"0.5em",size:"0.75em"},select:{icons:{margin:{horizontal:"0"}}}};function Tl(e){var t=e.checked,a=e.disabled,n=e.label,o=e.onChange,l=e.title;return r.a.createElement(Nr.a,{checked:t,disabled:a,id:l,label:r.a.createElement(ge.a,{size:"small"},n),name:l,onChange:o})}Tl.defaultProps={checked:!1,disabled:!1,label:"",onChange:function(){},title:""};var Ll=Tl;function zl(){var e=Object(Ae.a)(["\n  flex-direction: column-reverse;\n\n  > span {\n    margin: 1em 0em;\n    position: absolute;\n  }\n"]);return zl=function(){return e},e}function Il(){var e=Object(Ae.a)(["\n  text-transform: uppercase;\n"]);return Il=function(){return e},e}var _l=Object(Te.default)(ge.a)(Il()),Ml=Object(Te.default)(Re.a)(zl()),Nl=function(e){var t=Object.values(e).some(function(e){return e&&!0===e.valueOf()}),a={};return t||0!==e.type.length||(a.type="Type is required"),!e.id&&!t&&e.type.length>0&&(a.id="You must enter an ID"),e.type===T.ZOONIVERSE&&e.id&&e.id.length&&!/^[0-9]*$/.test(e.id)&&(a.id="Zooniverse ID must be a number"),a};var Fl=Wr(function(e){var t=e.onClose,a=e.onSubmit,n=e.initialValues,o=e.options,l=e.setValue,c=e.value;return r.a.createElement(Ee.a,{background:"white",elevation:"medium",pad:"small",round:"xsmall",width:"25em"},r.a.createElement(Ee.a,{gap:"small"},r.a.createElement(Ee.a,{align:"center",direction:"row",justify:"between"},r.a.createElement(ge.a,{size:"large"},"Search or Filter"),r.a.createElement(Pe.a,{a11yTitle:"Close Subject Search Modal",icon:r.a.createElement(ot.a,{icon:lt.j}),plain:!0,onClick:t})),r.a.createElement(_l,null,"Find a specific subject"),r.a.createElement(ze.b,{enableReinitialize:!0,initialValues:n,onSubmit:a,validate:Nl,validateOnChange:!1},function(e){var a=e.errors,n=e.handleChange,i=e.handleSubmit,s=e.setFieldValue,u=e.values,m=!!(u.id&&u.id.length>=1),d=Object.values(u).some(function(e){return e&&!0===e.valueOf()});return r.a.createElement(Ee.a,{as:"form",onSubmit:i,gap:"small"},r.a.createElement(Ee.a,{direction:"row",gap:"xsmall",margin:{bottom:"xsmall"}},r.a.createElement(Ee.a,{basis:"1/3"},r.a.createElement(Ml,{htmlFor:"type",label:"ID TYPE",error:a&&a.type},r.a.createElement(Dl.a,{disabled:d,dropAlign:{top:"top"},id:"type",name:"type",options:o,onChange:function(e){var t=e.option;s("type",t),l(t)},plain:!0,value:r.a.createElement(ge.a,null,u.type||c)}))),r.a.createElement(Ee.a,{basis:"2/3"},r.a.createElement(Ml,{htmlFor:"id",label:"NAME",error:a&&a.id},r.a.createElement(De.a,{color:"red",disabled:d,id:"id",name:"id",onChange:n,placeholder:"eg. 58674",size:"small",value:u.id})))),r.a.createElement(_l,null,"Filter subject list by status"),r.a.createElement(Ee.a,{direction:"row",justify:"between"},r.a.createElement(Ee.a,{gap:"small"},r.a.createElement(ge.a,{weight:"bold"},"Approval Status"),r.a.createElement(Re.a,{htmlFor:L.UNSEEN},r.a.createElement(Ll,{checked:u.unseen,disabled:m,label:"UNSEEN",onChange:n,title:L.UNSEEN})),r.a.createElement(Re.a,{htmlFor:L.IN_PROGRESS},r.a.createElement(Ll,{checked:u.in_progress,disabled:m,label:"IN PROGRESS",onChange:n,title:L.IN_PROGRESS})),r.a.createElement(Re.a,{htmlFor:L.READY},r.a.createElement(Ll,{checked:u.ready,disabled:m,label:"READY FOR REVIEW",onChange:n,title:L.READY})),r.a.createElement(Re.a,{htmlFor:L.APPROVED},r.a.createElement(Ll,{checked:u.approved,disabled:m,label:"APPROVED",onChange:n,title:L.APPROVED}))),r.a.createElement(Ee.a,{gap:"small"},r.a.createElement(ge.a,{weight:"bold"},"Additional Filters"),r.a.createElement(Re.a,{htmlFor:L.FLAGGED},r.a.createElement(Ll,{checked:u.flagged,disabled:m,label:"FLAGGED",onChange:n,title:L.FLAGGED})))),r.a.createElement(Ee.a,{direction:"row",justify:"between",margin:{top:"small"}},r.a.createElement(Pe.a,{a11yTitle:"Close Subject Search Modal",onClick:t,plain:!0},r.a.createElement(_l,null,"Close")),r.a.createElement(Pe.a,{a11yTitle:"Submit Subject Search Query",plain:!0,type:"submit"},r.a.createElement(_l,null,"Search"))))})))},Pl);var Bl=Object(pe.a)(function(){var e=r.a.useState("Select..."),t=Object(ra.a)(e,2),a=t[0],n=t[1],o=r.a.useContext(ue);return r.a.createElement(Fl,{initialValues:o.search,onClose:function(){return o.modal.toggleModal("")},onSubmit:function(e){return o.search.searchTranscriptions(e)},options:[T.ZOONIVERSE,T.INTERNAL],setValue:n,types:T,value:a})}),Vl={UNAPPROVED:function(){return r.a.createElement(jl,null)},DOWNLOAD_SUBJECT:function(){return r.a.createElement(kl,null)},DOWNLOAD_GROUP:function(){return r.a.createElement(kl,{entireGroup:!0})},LOCKED:function(){return r.a.createElement(Rl,null)},SEARCH:function(){return r.a.createElement(Bl,null)}};var Ul=function(e){return Vl[e]||null};var ql=Object(pe.a)(function(){var e=r.a.useContext(ue),t=e.modal&&e.modal.current,a=Ul(t);return r.a.createElement(Ee.a,null,a&&r.a.createElement(oa.a,null,r.a.createElement(a,null)))}),Gl=a(251),Hl=a.n(Gl),Wl=a(252),Yl=a.n(Wl),Xl=Hl()({},Yl.a,{global:{colors:{border:{light:"light-5"},gray:"#979797",placeholder:"#ACACAC"},input:{padding:"0"}},anchor:{color:"#0043B8",textDecoration:"underline"},checkBox:{check:{radius:"0"},size:"1.35em",gap:"xxsmall",toggle:{extend:function(e){return"\n      background-color: #D8D8D8;\n      border-color: #979797;\n      "},knob:{extend:function(e){var t=e.checked;return"\n        background-color: #FFFFFF;\n        border: 2px solid #5C5C5C;\n        height: 1em;\n        width: 1em;\n        ".concat(t?"margin: 0.15em 0;":"margin: 0.15em","\n        ")}}}},dataTable:{primary:{weight:300}},formField:{label:{margin:{bottom:"xsmall",horizontal:"none"}},margin:"medium",extend:function(e){return"\n      div:first-child {\n        border-bottom: none;\n      }\n    "}},layer:{border:{radius:"10px"},overlay:{background:"rgba(225, 225, 225, 0.75)"}},table:{extend:function(e){return"\n      tr:nth-child(even) {\n        background: #EEEEEE;\n      }\n      thead {\n        text-transform: uppercase;\n      }\n      span {\n        font-size: 0.8em;\n      }\n    "}}});var Zl=Object(pe.a)(function(){var e=r.a.useContext(ue);return de()(e),r.a.useEffect(function(){e.initialize()},[e]),e.initialized?r.a.createElement(c.b,{history:b},r.a.createElement(fe,null),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,r.a.createElement(i.a,{theme:Xl},r.a.createElement(c.a,{exact:!0,path:"/",component:nt}),r.a.createElement(c.a,{path:"/",component:ql}),r.a.createElement(c.a,{path:"/(projects|about)",component:vl}),r.a.createElement(c.a,{exact:!0,path:"/about",component:Aa}),r.a.createElement(c.a,{exact:!0,path:gt,component:pt}),r.a.createElement(c.a,{exact:!0,path:Et,component:na}),r.a.createElement(c.a,{exact:!0,path:ht,component:ea}),r.a.createElement(c.a,{exact:!0,path:vt,component:Qt}),r.a.createElement(c.a,{exact:!0,path:yt,component:xo}))))):null});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Zl,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},63:function(e,t,a){e.exports=a.p+"static/media/zooniverse.0354d3ce.png"}},[[257,1,2]]]);
//# sourceMappingURL=main.3ab7bf53.chunk.js.map